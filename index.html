
 <!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
    <title>Hexo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="John Doe">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@stanosaka">

    
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/toad.ico">
    
    
    <link rel="apple-touch-icon" href="/img/toadman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/toadman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/%02.css">
<link rel="stylesheet" href="/.css">

<meta name="generator" content="Hexo 5.4.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/toadman.png" alt="Hexo" title="Hexo"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Hexo">Hexo</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:example.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/03/20/modern-system-admin/" title="modern system administration" itemprop="url">modern system administration</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2021-03-20T09:39:38.000Z" itemprop="datePublished"> Published 2021-03-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="A-role-by-any-other-name"><a href="#A-role-by-any-other-name" class="headerlink" title="A role by any other name"></a>A role by any other name</h1><p>To keep current with the tides of change within the industry, oranizations have taken to retitling their system administration postings to<br>devops engineer or siste reliability engineer (SRE).</p>
<p>May people think about devops as specific tools like Docker or Kubernetes, or practices ike continuous deployment and continuous integration.<br>What makes tools and practices “devops” is how they are used, not the tools or practices directly.</p>
<p>Site Reliability Engineering is an engineering discipline that helps an organization achieve the appropriate levels of reliability in their<br>systems, services, and products.</p>
<p>One measure of reliability is often used in exclustion to any other, and that is availability.</p>
<p>SLIs<br>SLOs</p>
<h2 id="How-do-devops-and-SRE-differ"><a href="#How-do-devops-and-SRE-differ" class="headerlink" title="How do devops and SRE differ?"></a>How do devops and SRE differ?</h2><p>While devops and SRE arose around the same time, devops is more focused on culture change (hat happens to impact technology and tools) while<br>SRE is very focused on changing the mode of Operations in general.</p>
<p>With SRE, there is often an expectation that engineers are also software engineers with operability skills. With DevOps Engineers, there is often an assumption that engineers are strong in at least one modern language as well as have expertise in continuous integration and deployment.</p>
<p>A sysadmin is someone who is responsible for building, configuring, and maintaining reliable systems where systems can be specific tools,<br>applications, or services.</p>
<p>What technical stacks are you familiar with?</p>
<h1 id="Chatper-1-Version-Control"><a href="#Chatper-1-Version-Control" class="headerlink" title="Chatper 1. Version Control"></a>Chatper 1. Version Control</h1><h2 id="Resolving-Conflicts"><a href="#Resolving-Conflicts" class="headerlink" title="Resolving Conflicts"></a>Resolving Conflicts</h2><ul>
<li>Cherry-picking</li>
<li>If there are any uncommitted changes, stash them with git stash</li>
<li>Start from the default branch so that it is the parent for the new feature branch to complete the emergency work. It’s important that<br>the emergency work isn’t blocked by any work in progress on a different branch.</li>
<li>Pull changes from the remote shared repository to the local default branch so that it’s up-to-date to minimize any potential confilicts.</li>
<li>Create a hotfix branch.</li>
<li>Make changes, test,stage, commit, push, and PR with the hotfix branch following the same process as regular changes.</li>
<li>Bring back any stashed work with git stash list, and git stash apply.</li>
</ul>
<h2 id="Fixing-your-local-repository"><a href="#Fixing-your-local-repository" class="headerlink" title="Fixing your local repository"></a>Fixing your local repository</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset FILE</span><br></pre></td></tr></table></figure>
<p>This replaces FILE in the current working directory with the last committed version.</p>
<h2 id="Advancing-Collaboration-with-VC"><a href="#Advancing-Collaboration-with-VC" class="headerlink" title="Advancing Collaboration with VC"></a>Advancing Collaboration with VC</h2><ul>
<li>Credit all collaborators</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Commit Message describing what the set of changes do.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Co-authored-by: Name &lt;email@example.com&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>Have at least one reviewer</strong> other than yourself before merging code</p>
</li>
<li><p><strong>Write quality commit messages</strong> explaining the context for the changes within the commit.</p>
</li>
</ul>
<h2 id="Chapter-2-Local-Development-Environments"><a href="#Chapter-2-Local-Development-Environments" class="headerlink" title="Chapter 2. Local Development Environments"></a>Chapter 2. Local Development Environments</h2><h3 id="Choosing-an-editor"><a href="#Choosing-an-editor" class="headerlink" title="Choosing an editor"></a>Choosing an editor</h3><p>The work that a sysadmin needs to do with an editor includes developing scripts, codifying infrastructure, writing documentation, composing tests,<br>and reading code.</p>
<p>For example, Visual Studio Code(VS Code)</p>
<h3 id="Minimizing-required-mouse-usage"><a href="#Minimizing-required-mouse-usage" class="headerlink" title="Minimizing required mouse usage"></a>Minimizing required mouse usage</h3><ul>
<li>Splitting the screen up vertically and horizontally</li>
<li>integrated terminal with VS Code<h3 id="Integrated-Static-Code-Analysis"><a href="#Integrated-Static-Code-Analysis" class="headerlink" title="Integrated Static Code Analysis"></a>Integrated Static Code Analysis</h3></li>
<li>shellcheck <h3 id="Easing-editing-through-auto-completion"><a href="#Easing-editing-through-auto-completion" class="headerlink" title="Easing editing through auto completion"></a>Easing editing through auto completion</h3></li>
<li>Docker extension<h3 id="Indenting-code-to-match-team-conventions"><a href="#Indenting-code-to-match-team-conventions" class="headerlink" title="Indenting code to match team conventions"></a>Indenting code to match team conventions</h3>In VS Code, this is visible in the lower panel along with other conventions about the file type. From the Command Palette, you can change the spacing from tabs to spaces.<h3 id="Collaborating-while-editing"><a href="#Collaborating-while-editing" class="headerlink" title="Collaborating while editing"></a>Collaborating while editing</h3></li>
<li>Live Share extension<h3 id="Integrating-workflow-with-git"><a href="#Integrating-workflow-with-git" class="headerlink" title="Integrating workflow with git"></a>Integrating workflow with git</h3>M icon: modified files<br>U: updated and unmerged<h3 id="Extending-the-development-environment"><a href="#Extending-the-development-environment" class="headerlink" title="Extending the development environment"></a>Extending the development environment</h3></li>
<li>Remote Extension: allows individuals to use a remote system for “local” development with familiar local features</li>
</ul>
<p>more aewsome extension<a target="_blank" rel="noopener" href="https://github.com/viatsko/awesome-vscode">checkout</a></p>
<h2 id="Selecting-languages-to-install"><a href="#Selecting-languages-to-install" class="headerlink" title="Selecting languages to install"></a>Selecting languages to install</h2><p>While you might not spend time developing applications, honing development skills in shell code and at least one language is essential.</p>
<p>Python, Ruby, and Go become much more useful to write utilities.</p>
<h2 id="Installing-the-Configuring-Applications"><a href="#Installing-the-Configuring-Applications" class="headerlink" title="Installing the Configuring Applications"></a>Installing the Configuring Applications</h2><ul>
<li>The Silver Searcher</li>
<li>bash-completion</li>
<li>cURL<br>verify whether you can connect to a URL, which is one of the first validations when checking a web service.<br>use it to send or retrieve data from a URL</li>
<li>Docker</li>
<li>hub</li>
<li>jq</li>
<li>Postman</li>
<li>shellcheck</li>
<li>tree</li>
</ul>
<h2 id="Chapter-3-What-is-Security"><a href="#Chapter-3-What-is-Security" class="headerlink" title="Chapter 3: What is Security?"></a>Chapter 3: What is Security?</h2><p>Security is the practice of protecting hardware, software, networks, and data from harm, theft, or unauthorized access.</p>
<h2 id="Chapter-4-Server-virtualization-and-containers"><a href="#Chapter-4-Server-virtualization-and-containers" class="headerlink" title="Chapter 4: Server virtualization and containers"></a>Chapter 4: Server virtualization and containers</h2>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/modern-system-administration/">modern system administration</a><a href="/tags/dveops/">dveops</a><a href="/tags/sre/">sre</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/03/05/k8s2/" title="k8s" itemprop="url">k8s</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2021-03-05T10:59:17.000Z" itemprop="datePublished"> Published 2021-03-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Kubernetes-The-Terminology"><a href="#Kubernetes-The-Terminology" class="headerlink" title="Kubernetes: The Terminology"></a>Kubernetes: The Terminology</h1><h2 id="Architecture-of-a-Kubernetes-cluster"><a href="#Architecture-of-a-Kubernetes-cluster" class="headerlink" title="Architecture of a Kubernetes cluster"></a>Architecture of a Kubernetes cluster</h2><p><img src="https://i.imgur.com/iKCr9mV.png" alt="Architecure" title="Architecure"> </p>
<h2 id="Kubernetes-node-types"><a href="#Kubernetes-node-types" class="headerlink" title="Kubernetes node types"></a>Kubernetes node types</h2><p>can be a VM, a bare metal host, a Raspberry Pi</p>
<p>Two distinct categories:</p>
<ol>
<li>master nodes: run the k8s control plane applications</li>
<li>worker nodes: run the pplications that you deploy onto k8s</li>
</ol>
<p>A production deployment should have a minimum of three master nodes and three worker nodes.<br>Most large deployments have many more workers than masters.</p>
<h2 id="The-k8s-control-plane"><a href="#The-k8s-control-plane" class="headerlink" title="The k8s control plane"></a>The k8s control plane</h2><ul>
<li>kube-apiserver: this application handles instructions send to k8s.<br>is a component that accepts HTTPS requests, typically on port <strong>443</strong>.<br>when a configuration request is made to the k8s API server, it will check the current cluster configuration in <strong>etcd</strong> and change it if necessary.</li>
</ul>
<p>The Kubernetes API is generally a RESTful API, with endpoints for each Kubernetes resource type, along with an API version that is passed in the query path; for instance, <strong>/api/v1</strong>.</p>
<ul>
<li><p>kube-scheduler: this component handles wthe work of deciding which nodes to place workloads on, which can become quite complex.<br>By default, this decision is influenced by workload resource requirements and node status.</p>
</li>
<li><p>kube-controller-manager: this component provides a high-level control loop that ensures that the desired configuration of the cluster and applications running on it is implemented.</p>
<ul>
<li>The node controller, which ensures that nodes are up and running</li>
<li>The replication controller, which ensures that each workload is scaled properly</li>
<li>The endpoints controller, which handles communication and routing configuration for each workload.</li>
<li>Service account and token controllers, which handle the creation of API access tokens and default accounts</li>
</ul>
</li>
<li><p>etcd: a distrubuted key-value store that contains the cluster configuration<br>An <strong>etcd</strong> replica runs on each master node and uses the Raft consensus algorithm, which ensures that a quorum is maintained before allowing any changes to the keys or values.</p>
</li>
</ul>
<h2 id="K8s-worker-nodes"><a href="#K8s-worker-nodes" class="headerlink" title="K8s worker nodes"></a>K8s worker nodes</h2><p>contins components what allow it to communicate with the control plane and handle networking.</p>
<ul>
<li><p>kubelet<br>The kubelet is an agent that runs on every node (including master nodes, though it has a different configuration in that context). Its main purpose is to receive a list of PodSpecs (more on those later) and ensure that the containers prescribed by them are running on the node. The kubelet gets these PodSpecs through a few different possible mechanisms, but the main way is by querying the Kubernetes API server. Alternately, the kubelet can be started with a file path, which it will monitor for a list of PodSpecs, an HTTP endpoint to monitor, or its own HTTP endpoint to receive requests on.</p>
</li>
<li><p>kube-proxy<br>kube-proxy is a network proxy that runs on every node. Its main purpose is to do TCP, UDP, and SCTP forwarding (either via stream or round-robin) to workloads running on its node.</p>
</li>
<li><p>The container runtime<br>The container runtime runs on each node and is the component that actually runs your workloads. Kubernetes supports CRI-O, Docker, containerd, rktlet, and any valid <strong>Container Runtime Interface (CRI)</strong> runtime. </p>
</li>
</ul>
<h2 id="Addons"><a href="#Addons" class="headerlink" title="Addons"></a>Addons</h2><p>For example, <strong>Container Network Interface (CNI)</strong> plugins such as <strong>Calico</strong>, <strong>Flannel</strong>, or <strong>Weave</strong> provide overlay network functionality that adheres to Kubernetes’ networking requirements.</p>
<h2 id="Authenication-and-authorization-on-K8s"><a href="#Authenication-and-authorization-on-K8s" class="headerlink" title="Authenication and authorization on K8s"></a>Authenication and authorization on K8s</h2><h3 id="Namespaces"><a href="#Namespaces" class="headerlink" title="Namespaces"></a>Namespaces</h3><p>is a construct that allows you group k8s resources in your cluster.<br>For instance, for each environment-dev, staging, and production.</p>
<p>Default namespace:</p>
<ul>
<li><strong>kube-system</strong><br>continas the cluster services such as <strong>etcd</strong>, the scheduler, and any resource created by k8s itself and not users.</li>
<li><strong>kube-public</strong><br>is readable by all users by default and can be used for public resources.</li>
</ul>
<h3 id="Users"><a href="#Users" class="headerlink" title="Users"></a>Users</h3><p>two types:</p>
<ul>
<li>regular users<br>Regular users are generally managed by a service outside the cluster, whether they be private keys, usernames and passwords, or some form of user store.</li>
<li>service accounts<br>Service accounts however are managed by Kubernetes and restricted to specific namespaces. To create a service account, the Kubernetes API may automatically make one, or they can be made manually through calls to the Kubernetes API.</li>
</ul>
<h3 id="Authentication-methods"><a href="#Authentication-methods" class="headerlink" title="Authentication methods"></a>Authentication methods</h3><ul>
<li>HTTP basic authentication</li>
<li>client certificates</li>
<li>bearer tokens</li>
<li>proxy-based authentication</li>
</ul>
<h3 id="K8s’-certificate-infrastructre-for-TLS-and-security"><a href="#K8s’-certificate-infrastructre-for-TLS-and-security" class="headerlink" title="K8s’ certificate infrastructre for TLS and security"></a>K8s’ certificate infrastructre for TLS and security</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -key myuser.pem -out myusercsr.pem -subj &quot;&#x2F;CN&#x3D;myuser&#x2F;0&#x3D;dev&#x2F;0&#x3D;staging&quot;</span><br></pre></td></tr></table></figure>
<p>This will create a CSR for the user <strong>myuser</strong> who is part of groups named <strong>dev</strong> and <strong>staging</strong>.</p>
<p>Once the CA and CSR are created, the actual client and server certificates can be created using <strong>openssl</strong>,<strong>easyrsa</strong>, <strong>cfssl</strong>, or any certificate generation tool.</p>
<h3 id="RBAC"><a href="#RBAC" class="headerlink" title="RBAC"></a>RBAC</h3><p>stand for <strong>Role-Based Access Control</strong> and is a common pattern for authorization.<br>In k8s specifically, the roles and users of RBAC are implemented using four k8s resources: <strong>Role</strong>,<strong>ClusterRole</strong>,<strong>RoleBinding</strong>, and <strong>ClusterRoleBinding</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/PacktPublishing/Cloud-Native-with-Kubernetes/raw/master/Chapter1/read-only-role.yaml" title="read-only-role">read-only-role</a></p>
<p>The only difference between a <strong>Role</strong> and <strong>ClusterRole</strong> is that a <strong>Role</strong> is restricted to a particular namespace (in this case, the default namespace), while a <strong>ClusterRole</strong> can affect accross to all resources of<br>that type in the cluster, as well as cluster-scoped resources such as nodes.</p>
<h3 id="ABAC"><a href="#ABAC" class="headerlink" title="ABAC"></a>ABAC</h3><p>stand for <strong>Attribute-Based Access Control</strong>. works using policies instead of roles.</p>
<h2 id="Using-kubectl-and-YAML"><a href="#Using-kubectl-and-YAML" class="headerlink" title="Using kubectl and YAML"></a>Using kubectl and YAML</h2><h3 id="Setting-up-kubectl-and-kubeconfig"><a href="#Setting-up-kubectl-and-kubeconfig" class="headerlink" title="Setting up kubectl and kubeconfig"></a>Setting up kubectl and kubeconfig</h3><p><a target="_blank" rel="noopener" href="https://github.com/PacktPublishing/Cloud-Native-with-Kubernetes/raw/master/Chapter1/example-kubeconfig" title="kubeconfig">kubeconfig</a><br>three sections to a <strong>Kuberconfig</strong> YAML file: clusters, users,a nd contexts</p>
<h3 id="Imperative-versus-declarative-commands"><a href="#Imperative-versus-declarative-commands" class="headerlink" title="Imperative versus declarative commands"></a>Imperative versus declarative commands</h3><p>Two paradigms for talking to the k8s API:</p>
<ul>
<li><p>imperative<br>allow you dictate to k8s “what to do”: “spin up two copies of Ubuntu**</p>
</li>
<li><p>declarative<br>allow you to write a file with a specification of what should be running on the cluster, and have the k8s API ensures that the configuration maches the cluster configuration, updating it if necessary</p>
</li>
</ul>
<p>Basic kubectl commands:<br><strong>kubectl get reourece_type</strong>: see k8s resources in your cluster, where <strong>resource_type</strong> is the full name of the k8s resources<br><strong>kubectl get nodes</strong>: find which nodes exist in a cluster<br><strong>wide</strong> output flag: <strong>kubectl get nodes -o wide</strong> add additional information to the list<br><strong>describe</strong>: works similarly to <strong>get</strong>, except that we can optionally pass the name of a specific resource<br><strong>kubectl describe nodes</strong> will return details for all nodes in the cluster, while <strong>kubectl describe nodes node1</strong> will return a description of the node named <strong>node1</strong>.</p>
<ul>
<li><strong>kubectl create -f /path/to/file.yaml</strong>, which is an imperative command</li>
<li><strong>kubectl apply -f /path/to/file.yaml</strong>, which is declarative</li>
<li><strong>–dry-run</strong> flag to see the outout of the <strong>create</strong> or <strong>apply</strong> commands</li>
</ul>
<p>create works imperatively, so it will create a new resource, but if you run it again with the same file, the command will fail since the resource already exists. apply works declaratively, so if you run it the first time it will create the resource, and subsequent runs will update the running resource in Kubernetes with any changes. You can use the –dry-run flag to see the output of the create or apply commands.</p>
<p>To update existing resources imperatively, use the <strong>edit</strong> command like so: <strong>kubectl edit resource_type resource_name</strong></p>
<p>To update existing resources declaratively, you can edit your local YAML resource file.</p>
<ul>
<li><strong>kubectl cluster-info</strong>, which will show the IP addresses where the major K8s cluster services are running.</li>
</ul>
<h3 id="Writing-k8s-resource-YAML-files"><a href="#Writing-k8s-resource-YAML-files" class="headerlink" title="Writing k8s resource YAML files"></a>Writing k8s resource YAML files</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: my-pod</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - name: ubuntu</span><br><span class="line">    image: ubuntu:trusty</span><br><span class="line">    command: [&quot;echo&quot;]</span><br><span class="line">    args: [&quot;Hello Readers&quot;]</span><br></pre></td></tr></table></figure>
<p>has four top-level keys at a minimum: <strong>apiVersion,kind,metadata</strong>, and <strong>spec</strong>.</p>
<p><strong>apiVersion</strong> dictates which versions of the k8s API will be used to create the resource.<br><strong>kind</strong> specifies what type of resources the YAML file is referencing.<br><strong>metadata</strong> provides a location to name the resources, as well as adding annotations and name-spacing information<br><strong>spec</strong> kye will contain all the resource-specific information that k8s needs to create the resource in your cluster.</p>
<h1 id="Scaling"><a href="#Scaling" class="headerlink" title="Scaling"></a>Scaling</h1><h2 id="Pods"><a href="#Pods" class="headerlink" title="Pods:"></a>Pods:</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl scale deployments/course-demo-wordpress --replicas=5</span><br></pre></td></tr></table></figure>
<h2 id="Nodes"><a href="#Nodes" class="headerlink" title="Nodes:"></a>Nodes:</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">az aks scale --resource-group kubDemo --name demoCluster --node-count 3 --nodepool-name nodepoll1</span><br></pre></td></tr></table></figure>

<h2 id="Autoscale"><a href="#Autoscale" class="headerlink" title="Autoscale"></a>Autoscale</h2><h2 id="Pods-1"><a href="#Pods-1" class="headerlink" title="Pods:"></a>Pods:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl autoscale deployments course-demo-wordpress --cpu-percent&#x3D;40 --min&#x3D;2 --max&#x3D;10</span><br></pre></td></tr></table></figure>
<h2 id="Nodes-1"><a href="#Nodes-1" class="headerlink" title="Nodes:"></a>Nodes:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">az aks update --resource-group kubeDemo --name demoCluster -update-cluster-autoscaler --min-count 1 --max-count 3</span><br></pre></td></tr></table></figure>

<h1 id="issue"><a href="#issue" class="headerlink" title="issue"></a>issue</h1><ol>
<li>helm 3 status does not list resources<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm plugin install https:&#x2F;&#x2F;github.com&#x2F;marckhouzam&#x2F;helm-fullstats</span><br><span class="line"></span><br><span class="line">helm fullstatus nodeserver</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="CKA"><a href="#CKA" class="headerlink" title="CKA"></a>CKA</h1><h2 id="K8s-cluster"><a href="#K8s-cluster" class="headerlink" title="K8s cluster"></a>K8s cluster</h2><p>docs: kubeadm init</p>
<ol>
<li>kubeadm init  run as root</li>
</ol>
<ul>
<li>network</li>
<li>.kube/config</li>
<li>kubeadm join</li>
</ul>
<ol start="2">
<li>create config</li>
<li>kubectl — network<br>kubectl get nodes</li>
<li>kubeadm join <token>  run as root</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/k8s-kubernetes/">k8s, kubernetes</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/02/25/mysql-replication/" title="mysql-replication" itemprop="url">mysql-replication</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2021-02-25T00:20:35.000Z" itemprop="datePublished"> Published 2021-02-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Myql-replicatoin"><a href="#Myql-replicatoin" class="headerlink" title="Myql replicatoin"></a>Myql replicatoin</h1><h2 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h2><ol>
<li>Clean the salve db<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DROP_DB_LIST&#x3D;&#96;mysql -Nse &quot;SET group_concat_max_len &#x3D; 81920; SELECT GROUP_CONCAT(SCHEMA_NAME SEPARATOR &#39;;\nDROP DATABASE &#39;) FROM information_schema.SCHEMATA WHERE SCHEMA_NAME NOT IN (&#39;mysql&#39;,&#39;information_schema&#39;,&#39;performance_schema&#39;,&#39;sys&#39;);&quot;&#96;</span><br><span class="line">echo -e $DROP_DB_LIST &gt; &#x2F;tmp&#x2F;delete.sh </span><br><span class="line">vim &#x2F;tmp&#x2F;delete.sh</span><br><span class="line">mysql &lt; &#x2F;tmp&#x2F;delete.sh </span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="dump-on-the-1st-slave"><a href="#dump-on-the-1st-slave" class="headerlink" title="dump on the 1st slave"></a>dump on the 1st slave</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DB_LIST&#x3D;&#96;mysql -Nse &quot;SELECT GROUP_CONCAT(SCHEMA_NAME SEPARATOR &#39; &#39;) FROM information_schema.SCHEMATA WHERE SCHEMA_NAME NOT IN (&#39;</span><br><span class="line">mysql&#39;,&#39;information_schema&#39;,&#39;performance_schema&#39;,&#39;sys&#39;);&quot;&#96;</span><br><span class="line">mysqldump --dump-slave --apply-slave-statements --include-master-host-port --events --triggers --routines --single-transaction --opt --tz-utc --databases $DB_LIST &gt; mysql_au3_db_02_26Feb2021.sql</span><br></pre></td></tr></table></figure>

<h2 id="restore-on-the-2nd-slave"><a href="#restore-on-the-2nd-slave" class="headerlink" title="restore on the 2nd slave"></a>restore on the 2nd slave</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql &lt; restore_file.sql</span><br><span class="line">change master to master_host&#x3D;&#39;master_ip_add&#39;</span><br><span class="line">, master_user&#x3D;&#39;replication&#39;</span><br><span class="line">, master_password&#x3D;&#39;strongpasswd&#39;</span><br><span class="line">mysql: show slave status\G;</span><br></pre></td></tr></table></figure>

<h2 id="common-problems"><a href="#common-problems" class="headerlink" title="common problems"></a>common problems</h2><h3 id="dropping-a-database-with-a-special-character-in-the-databsename"><a href="#dropping-a-database-with-a-special-character-in-the-databsename" class="headerlink" title="dropping a database with a special character in the databsename"></a>dropping a database with a special character in the databsename</h3><p>error message:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@au3-db-03 mysql]# mysql &lt; &#x2F;tmp&#x2F;deletenewnew.sh</span><br><span class="line">ERROR 1064 (42000) at line 267: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;-123&#39; at line 1</span><br></pre></td></tr></table></figure>
<p>fix by:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop database &#96;supd-123&#96;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/mysql/">mysql</a><a href="/tags/replication/">replication</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/02/25/azure-mysql/" title="azure mysql" itemprop="url">azure mysql</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2021-02-24T23:41:47.000Z" itemprop="datePublished"> Published 2021-02-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Create-a-read-only-account-with-azure-mysql-8-0"><a href="#Create-a-read-only-account-with-azure-mysql-8-0" class="headerlink" title="Create a read-only account with azure mysql 8.0"></a>Create a read-only account with azure mysql 8.0</h1><h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><ol>
<li>When creating role and granting privileges, please use ‘%’ instead of ‘localhost’. For PaaS, ‘localhost’ means physical host machine that cannot be accessed in cloud considering security.</li>
<li>After creating role and granting role privileges to the target user, please run [SET DEFAULT ROLE ALL TO ‘{username}’]</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">create user &#39;foobarreader&#39;@&#39;%&#39; identified by &#39;StrongPassword!&#39;;</span><br><span class="line">create role &#39;foobar_read_only&#39;;</span><br><span class="line"></span><br><span class="line">grant select on foobardb.* to &#39;foobar_read_only&#39;;</span><br><span class="line"></span><br><span class="line">mysql&gt; grant &#39;foobar_read_only&#39; to &#39;foobarreader&#39;@&#39;%&#39;;</span><br><span class="line"></span><br><span class="line">mysql&gt; set default role all to &#39;foobarreader&#39;;</span><br><span class="line"></span><br><span class="line">mysql&gt; show grants for &#39;foobarreader&#39;@&#39;%&#39;;</span><br><span class="line"></span><br><span class="line">mysql&gt; show grants for &#39;foobarreader&#39;@&#39;%&#39; using &#39;foobar_read_only&#39;;</span><br><span class="line"></span><br><span class="line">## check by login via new created user and test show databases</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/set-default-role.html" title="role permission control">Mysql 8 role permission control system</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/azure/">azure</a><a href="/tags/mysql/">mysql</a><a href="/tags/PaaS/">PaaS</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/02/24/AKS/" title="AKS" itemprop="url">AKS</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2021-02-24T09:39:06.000Z" itemprop="datePublished"> Published 2021-02-24</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="1-K8s-on-Azure"><a href="#1-K8s-on-Azure" class="headerlink" title="1. K8s on Azure"></a>1. K8s on Azure</h1><h2 id="Deployment-models"><a href="#Deployment-models" class="headerlink" title="Deployment models"></a>Deployment models</h2><p><img src="https://i.imgur.com/XQNAABL.png" alt="architecure" title="architecture"></p>
<h2 id="Create-the-Azure-Container-Registry"><a href="#Create-the-Azure-Container-Registry" class="headerlink" title="Create the Azure Container Registry"></a>Create the Azure Container Registry</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">az group create --name myResourceGroup --location australiaeast</span><br><span class="line">az acr create --resource-group myResourceGroup --name cwzhou --sku Basic</span><br></pre></td></tr></table></figure>

<h2 id="Push-a-container-to-the-registry"><a href="#Push-a-container-to-the-registry" class="headerlink" title="Push a container to the registry"></a>Push a container to the registry</h2><h3 id="Login-to-your-ACR-instance"><a href="#Login-to-your-ACR-instance" class="headerlink" title="Login to your ACR instance:"></a>Login to your ACR instance:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">az acr login --name akscourse</span><br></pre></td></tr></table></figure>

<h3 id="Verify-that-you-have-a-local-copy-of-your-application-image"><a href="#Verify-that-you-have-a-local-copy-of-your-application-image" class="headerlink" title="Verify that you have a local copy of your application image:"></a>Verify that you have a local copy of your application image:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>If you don’t have an application, you can quickly build your own mini-application image (see the app_example/README.md file):<br>docker build app_example/ -t hostname:v1</p>
<p>We need to tag the image with the registry login server address which we can get with:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export aLS&#x3D;&#96;az acr list --resource-group myResourceGroup --query &quot;[].&#123;acrLoginServer:loginServer&#125;&quot; --output tsv&#96;</span><br></pre></td></tr></table></figure>

<h3 id="Tag-your-nginx-image-with-the-server-address-and-verion-v1-in-this-case"><a href="#Tag-your-nginx-image-with-the-server-address-and-verion-v1-in-this-case" class="headerlink" title="Tag your nginx image with the server address and verion (v1 in this case):"></a>Tag your nginx image with the server address and verion (v1 in this case):</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag hostname:v1 $&#123;aLS&#125;&#x2F;hostname:v1</span><br></pre></td></tr></table></figure>

<h3 id="Verify-that-your-tags-have-been-applied"><a href="#Verify-that-your-tags-have-been-applied" class="headerlink" title="Verify that your tags have been applied:"></a>Verify that your tags have been applied:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>Push the image to the Registry:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push $&#123;aLS&#125;&#x2F;hostname:v1</span><br></pre></td></tr></table></figure>

<p>Verify that the image has been pushed correctly:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">az acr repository list --name cwzhou --output tsv</span><br><span class="line">repository&#x3D;&lt;repository_output&gt;</span><br></pre></td></tr></table></figure>

<p>You can verify that the image is appropriately tagged with (repository is the output of the previous step):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">az acr repository show-tags --name cwzhou --repository $&#123;repository&#125; --output tsv</span><br></pre></td></tr></table></figure>

<h3 id="Verify-container-registry-image"><a href="#Verify-container-registry-image" class="headerlink" title="Verify container registry image"></a>Verify container registry image</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker rmi &lt;registry&#x2F;image:version&gt;</span><br><span class="line">docker pull &lt;registry&#x2F;image:version&gt;</span><br><span class="line"></span><br><span class="line">It should also then be possible to run the image locally to verify operation:</span><br><span class="line"></span><br><span class="line">docker run --rm --name hostname -p 8080:80 &lt;registry&#x2F;image:version&gt;</span><br><span class="line">curl localhost:8080</span><br><span class="line">docker stop hostname</span><br><span class="line">docker rmi &lt;registry&#x2F;image:version&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Establish-AKS-specific-credentials"><a href="#Establish-AKS-specific-credentials" class="headerlink" title="Establish AKS specific credentials"></a>Establish AKS specific credentials</h3><p>To allow an AKS cluster to interact with other Azure resources such as the Azure Container Registry we created in a previous chapter, an Azure Active Directory (ad) service principal is used. To create the service principal:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">az ad sp create-for-rbac --skip-assignment</span><br></pre></td></tr></table></figure>

<p>Make a note of the appId and password, you will need these. Better yet, save this credential somewhere secure.</p>
<p>Get the ACR resource ID:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">az acr show --resource-group myResourceGroup --name cwzhou --query &quot;id&quot; --output tsv</span><br></pre></td></tr></table></figure>

<p>Create a role assignment:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">az role assignment create --assignee &lt;appId&gt; --scope &lt;acrId&gt; --role Reader</span><br></pre></td></tr></table></figure>

<p>It is also possible to integrate AKS with Azure Active Directory in a much deeper fashion, which may be appropriate in an enterprise environment. Further instructions can be found here:</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/aks/aad-integration">https://docs.microsoft.com/en-us/azure/aks/aad-integration</a></p>
<h3 id="Launch-an-AKS-cluster"><a href="#Launch-an-AKS-cluster" class="headerlink" title="Launch an AKS cluster"></a>Launch an AKS cluster</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Finally we can create an AKS cluster (you will need your &lt;appId&gt; and &lt;password&gt; from the previous section):</span><br><span class="line"></span><br><span class="line">cat ..&#x2F;sp.txt</span><br><span class="line"></span><br><span class="line">az aks create \</span><br><span class="line">    --resource-group myResourceGroup \</span><br><span class="line">    --name myAKSCluster \</span><br><span class="line">    --node-count 1 \</span><br><span class="line">    --max-pods 20 \</span><br><span class="line">    --kubernetes-version 1.12.4 \</span><br><span class="line">    --generate-ssh-keys \</span><br><span class="line">    --enable-vmss \</span><br><span class="line">    --enable-cluster-autoscaler \</span><br><span class="line">    --min-count 1 \</span><br><span class="line">    --max-count 3 \</span><br><span class="line">    --service-principal &lt;appId&gt; --client-secret &lt;password&gt; </span><br><span class="line"></span><br><span class="line">This will create a cluster (which may take 5-10 minutes). Once done, we can connect to the kubernetes environment via the Kubernetes CLI. If you are using the Azure Cloud Shell, the kubernetes client (kubectl) is already installed. You can also install locally if you haven&#39;t previously installed a version of kubectl:</span><br><span class="line">az aks install-cli</span><br><span class="line"></span><br><span class="line">az aks get-credentials --resource-group myResourceGroup --name myAKSCluster --admin</span><br><span class="line"></span><br><span class="line">The resource-group and name were set during the creation process, and you should use those if different from what we&#39;re using here.</span><br><span class="line"></span><br><span class="line">Check your connection and that the kubernetes cli is working with:</span><br><span class="line">kubectl get nodes</span><br><span class="line"></span><br><span class="line">If you have issues with connecting, one thing you can check is the version of your kubernetes client:</span><br><span class="line">kubectl version</span><br><span class="line"></span><br><span class="line">This will tell you both the local client, and the configured kubernetes service version, make sure the client is at least the same if not newer than the server.</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/AKS/">AKS</a><a href="/tags/Azure/">Azure</a><a href="/tags/K8s/">K8s</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/02/01/spacemacs/" title="spacemacs" itemprop="url">spacemacs</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2021-02-01T09:39:06.000Z" itemprop="datePublished"> Published 2021-02-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h1><table>
<thead>
<tr>
<th>Key</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td>SPC p f</td>
<td align="center">search find in the same project</td>
</tr>
<tr>
<td>SPC p p</td>
<td align="center">open project</td>
</tr>
<tr>
<td>SPC w m</td>
<td align="center">max the current windows</td>
</tr>
<tr>
<td>ALT ;</td>
<td align="center">uncomment</td>
</tr>
<tr>
<td>gcc</td>
<td align="center">comment out a line</td>
</tr>
<tr>
<td>gc</td>
<td align="center">comment out highlighted text</td>
</tr>
<tr>
<td>SPC w /</td>
<td align="center">vertical</td>
</tr>
<tr>
<td>SPC w -</td>
<td align="center">horizontal</td>
</tr>
<tr>
<td>SPC f e d</td>
<td align="center">edit spacemacs profile</td>
</tr>
<tr>
<td>SPC f f</td>
<td align="center">open file</td>
</tr>
<tr>
<td>SPC w c</td>
<td align="center">close the window</td>
</tr>
<tr>
<td>SPC t l</td>
<td align="center">toggle lines</td>
</tr>
<tr>
<td>C-x h</td>
<td align="center">select the entire buffer</td>
</tr>
<tr>
<td>C-h m</td>
<td align="center">show available commands for the current modes</td>
</tr>
<tr>
<td>SPC a d</td>
<td align="center">Dired mode : 1. Copy file : C 2. Delete the file : D 3. Rename the file : R 4. Create a new directory : + 5. Reload directory listing : g</td>
</tr>
<tr>
<td>C-b</td>
<td align="center">Move back one full screen</td>
</tr>
<tr>
<td>C-f</td>
<td align="center">Move forward one full screen</td>
</tr>
<tr>
<td>C-d</td>
<td align="center">Move forward 1/2 screen</td>
</tr>
<tr>
<td>C-u</td>
<td align="center">Move back (upA)1/2 screen</td>
</tr>
<tr>
<td>/sudo::/path/to/file</td>
<td align="center">Open a file with su/sudo</td>
</tr>
<tr>
<td>r in <em>spacemacs</em> buffer</td>
<td align="center">Open from the recent file list</td>
</tr>
<tr>
<td>SPC o y</td>
<td align="center">Copy to clipboard</td>
</tr>
<tr>
<td>SPC o p</td>
<td align="center">Paste from clipboard</td>
</tr>
<tr>
<td>/ssh: :/home/szhou/</td>
<td align="center">ssh remote edit file</td>
</tr>
<tr>
<td>SPC s c</td>
<td align="center">clear the highlight of search</td>
</tr>
<tr>
<td>“2p</td>
<td align="center">paste the 2nd-last yanked lines</td>
</tr>
<tr>
<td>SPC r l</td>
<td align="center">resume the last helm session</td>
</tr>
</tbody></table>
<h1 id="Movement"><a href="#Movement" class="headerlink" title="Movement"></a>Movement</h1><table>
<thead>
<tr>
<th>Key</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td>C-u</td>
<td align="center">up half page</td>
</tr>
<tr>
<td>C-d</td>
<td align="center">down half page</td>
</tr>
<tr>
<td>d-0</td>
<td align="center">delete to the beginning of the line</td>
</tr>
</tbody></table>
<h1 id="Magit"><a href="#Magit" class="headerlink" title="Magit"></a>Magit</h1><table>
<thead>
<tr>
<th>Key</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td>SPC g s</td>
<td align="center">show Magit status view</td>
</tr>
<tr>
<td>j k</td>
<td align="center">position the cursor on a file</td>
</tr>
<tr>
<td>TAB</td>
<td align="center">show and hide the diff for the file</td>
</tr>
<tr>
<td>s</td>
<td align="center">stage a file (u to unstage fa file and x to discard changes to a file)</td>
</tr>
<tr>
<td>cc</td>
<td align="center">commit</td>
</tr>
<tr>
<td>,c</td>
<td align="center">finish the commit message</td>
</tr>
<tr>
<td>p u</td>
<td align="center">Push to upstream</td>
</tr>
<tr>
<td>F (r) u</td>
<td align="center">Pull tracked branch and rebase</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.saltycrane.com/blog/2018/11/magit-spacemacs-evil-magit-notes/" title="magit">magit</a></td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="Org-mode"><a href="#Org-mode" class="headerlink" title="Org mode"></a>Org mode</h1><table>
<thead>
<tr>
<th>Key</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td>M-x org-mode</td>
<td align="center">enable Org mode</td>
</tr>
<tr>
<td>M-shift-RET</td>
<td align="center">Add a TODO list</td>
</tr>
<tr>
<td>C-c C-t</td>
<td align="center">Mark as completed</td>
</tr>
<tr>
<td>C-c C-x C-b</td>
<td align="center">toogle checkbox</td>
</tr>
<tr>
<td>C-c C-t</td>
<td align="center">TODO to DONE</td>
</tr>
<tr>
<td>Alt-Up or Down</td>
<td align="center">Move the item</td>
</tr>
<tr>
<td>C-c C-x C-w</td>
<td align="center">Delete the item</td>
</tr>
<tr>
<td>Alt-Right</td>
<td align="center">Demote a headline</td>
</tr>
<tr>
<td>Alt-Shit-Left</td>
<td align="center">To promote a subtree</td>
</tr>
<tr>
<td>C-c C-e</td>
<td align="center">To start the exporter</td>
</tr>
<tr>
<td>h o</td>
<td align="center">Export to a web page and open</td>
</tr>
<tr>
<td>t A</td>
<td align="center">Export as an ADCII text file</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="Dired-mode"><a href="#Dired-mode" class="headerlink" title="Dired mode"></a>Dired mode</h1><table>
<thead>
<tr>
<th>Key</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td>SPC a d</td>
<td align="center">enable Dired Mode</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="Helm"><a href="#Helm" class="headerlink" title="Helm"></a>Helm</h1><table>
<thead>
<tr>
<th>Key</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td>SPC r l</td>
<td align="center">resume the last helm session</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="tumx"><a href="#tumx" class="headerlink" title="tumx"></a>tumx</h1><table>
<thead>
<tr>
<th>Key</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td>prefix :setw synchronize-panes off</td>
<td align="center">(ctrl + y)stop sending same command for all paines in windows</td>
</tr>
<tr>
<td>prefix :setw synchronize-panes on</td>
<td align="center">(ctrl + u)start sending same command for all paines in windows</td>
</tr>
<tr>
<td>prefix r</td>
<td align="center">reload the tmux configuration</td>
</tr>
<tr>
<td>prefix d</td>
<td align="center">Deatach the session</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li><a target="_blank" rel="noopener" href="https://orgmode.org/manual/index.html">https://orgmode.org/manual/index.html</a><br><a target="_blank" rel="noopener" href="https://gist.github.com/rnwolf/e09ae9ad6d3ac759767d129d52cab1f1" title="spacemacs keybindings">keybindings</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/spacemacs/">spacemacs</a><a href="/tags/emacs/">emacs</a><a href="/tags/editor/">editor</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/12/08/IaC/" title="IaC (Infrastructure as Code)" itemprop="url">IaC (Infrastructure as Code)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2020-12-08T01:07:49.000Z" itemprop="datePublished"> Published 2020-12-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Infrastructure-automation-tool-registries"><a href="#Infrastructure-automation-tool-registries" class="headerlink" title="Infrastructure automation tool registries"></a>Infrastructure automation tool registries</h1><ul>
<li>Chef Infra Server</li>
<li>PuppetDB</li>
<li>Ansible Tower</li>
<li>Salt Mine</li>
</ul>
<h1 id="General-purpose-configuration-registry-products"><a href="#General-purpose-configuration-registry-products" class="headerlink" title="General-purpose configuration registry products"></a>General-purpose configuration registry products</h1><ul>
<li>Zookeeper</li>
<li>etcd</li>
<li>Consul</li>
<li>doozerd</li>
</ul>
<h1 id="Handling-secrets-as-parameters"><a href="#Handling-secrets-as-parameters" class="headerlink" title="Handling secrets as parameters"></a>Handling secrets as parameters</h1><h2 id="Encrypting-secrets"><a href="#Encrypting-secrets" class="headerlink" title="Encrypting secrets"></a>Encrypting secrets</h2><ul>
<li><a target="_blank" rel="noopener" href="https://oreil.ly/-ZBmS">git-crypt</a> </li>
<li><a target="_blank" rel="noopener" href="https://oreil.ly/ZT99R">blackbox</a> </li>
<li><a target="_blank" rel="noopener" href="https://oreil.ly/7md-J">sops</a> </li>
<li><a target="_blank" rel="noopener" href="https://oreil.ly/2os70">transcript</a></li>
</ul>
<h2 id="Disposable-secrets"><a href="#Disposable-secrets" class="headerlink" title="Disposable secrets"></a>Disposable secrets</h2><ul>
<li>HashiCorp Vault</li>
</ul>
<h1 id="Continuously-Test-and-Deliver"><a href="#Continuously-Test-and-Deliver" class="headerlink" title="Continuously Test and Deliver"></a>Continuously Test and Deliver</h1><h2 id="Delivery-pipeline-software-dnd-services"><a href="#Delivery-pipeline-software-dnd-services" class="headerlink" title="Delivery pipeline software dnd services"></a>Delivery pipeline software dnd services</h2><h3 id="Build-server"><a href="#Build-server" class="headerlink" title="Build server"></a>Build server</h3><ul>
<li>Jenkins</li>
<li>Team City</li>
<li>Bamboo</li>
<li>Github Actions<h3 id="CD-software"><a href="#CD-software" class="headerlink" title="CD software"></a>CD software</h3></li>
<li>GoCD</li>
<li>ConcourseCI</li>
<li>BuildKite<h3 id="SaaS-services"><a href="#SaaS-services" class="headerlink" title="SaaS services"></a>SaaS services</h3></li>
<li>CircleCI</li>
<li>TravisCI</li>
<li>AppVeyor</li>
<li>Drone</li>
<li>BoxFuse<h3 id="Cloud-platform-services"><a href="#Cloud-platform-services" class="headerlink" title="Cloud platform services"></a>Cloud platform services</h3></li>
<li>AWS CodeBuild(CI)</li>
<li>AWS CodePipeline(CD)</li>
<li>Azure Pipelines<h3 id="Source-code-repository-services"><a href="#Source-code-repository-services" class="headerlink" title="Source code repository services"></a>Source code repository services</h3></li>
<li>Github Actions</li>
<li>GitLab CI and CD<h3 id="Evaluating-tools"><a href="#Evaluating-tools" class="headerlink" title="Evaluating tools"></a>Evaluating tools</h3></li>
<li>Atlantis (manage pull requests for Terraform projects)</li>
<li>Terraform Cloud</li>
<li>WeaveWorks(managing Kubernetes clusters)</li>
</ul>
<h2 id="Deployment-packages"><a href="#Deployment-packages" class="headerlink" title="Deployment packages"></a>Deployment packages</h2><table>
<thead>
<tr>
<th>Target runtime</th>
<th>Example packages</th>
</tr>
</thead>
<tbody><tr>
<td>Server oprating system</td>
<td>Red Hat RPM files, Debian .deb files, Windows MSI installer packages</td>
</tr>
<tr>
<td>Language runtime engine</td>
<td>Ruby gems, Python pip packages, Java .jar, .war, and .ear files</td>
</tr>
<tr>
<td>Container runtime</td>
<td>Docker images</td>
</tr>
<tr>
<td>Application clusters</td>
<td>Kubernetes Deployment Descriptors, Helm charts</td>
</tr>
<tr>
<td>FaaS serverless</td>
<td>Lambda deployment package</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/IaC/">IaC</a><a href="/tags/devops/">devops</a><a href="/tags/SRE/">SRE</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/11/11/influxdb/" title="influxdb" itemprop="url">influxdb</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2020-11-11T01:09:59.000Z" itemprop="datePublished"> Published 2020-11-11</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="1-Connect"><a href="#1-Connect" class="headerlink" title="1. Connect"></a>1. Connect</h1><p><code>influx</code></p>
<h1 id="2-Show"><a href="#2-Show" class="headerlink" title="2. Show"></a>2. Show</h1><p><code>show databases;</code><br><code>show measurements;</code><br><code>select * from foobar;</code></p>
<p><a target="_blank" rel="noopener" href="https://songrgg.github.io/operation/influxdb-command-cheatsheet/" title="cheetsheet">cheetsheet</a><br><a target="_blank" rel="noopener" href="https://i.imgur.com/PR99Mx5.png">grafana</a></p>
<h1 id="Telegraf"><a href="#Telegraf" class="headerlink" title="Telegraf"></a>Telegraf</h1><h2 id="check"><a href="#check" class="headerlink" title="check"></a>check</h2><p><code>telegraf --test</code><br><code>telegraf -config telegraf.con --test</code></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/database/">database</a><a href="/tags/influxdb/">influxdb</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/08/09/tools/" title="tools" itemprop="url">tools</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2020-08-09T04:15:15.000Z" itemprop="datePublished"> Published 2020-08-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- markdown-toc start - Don't edit this section. Run M-x markdown-toc-refresh-toc -->
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#-">-</a></li>
<li><a href="#multiplexers">Multiplexers</a><ul>
<li><a href="#byobu">byobu</a></li>
<li><a href="#mosh">mosh</a></li>
<li><a href="#ss">ss</a></li>
<li><a href="#mtr">mtr</a></li>
<li><a href="#iftop">iftop</a></li>
<li><a href="#iperf">iperf</a></li>
<li><a href="#troubleshooting-layer-1-problems">Troubleshooting layer 1 problems</a></li>
<li><a href="#http-core-protocol">HTTP core protocol</a><ul>
<li><a href="#request">Request</a></li>
<li><a href="#response">Response</a></li>
</ul>
</li>
<li><a href="#curl">cURL</a></li>
<li><a href="#netcat">netcat</a><ul>
<li><a href="#basic-clientserver">Basic client/server</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- markdown-toc end -->

<h1 id="Multiplexers"><a href="#Multiplexers" class="headerlink" title="Multiplexers"></a>Multiplexers</h1><h2 id="mosh"><a href="#mosh" class="headerlink" title="mosh"></a>mosh</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mosh jdoe@10.10.10.101</span><br><span class="line">mosh username@remoteserver.org --ssh&#x3D;&quot;ssh -i ~&#x2F;.ssh&#x2F;identity_file -p 1234&quot;</span><br></pre></td></tr></table></figure>

<h2 id="ss"><a href="#ss" class="headerlink" title="ss"></a>ss</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">user@opsschool ~$ ss -tuln</span><br><span class="line">Netid  State      Recv-Q Send-Q         Local Address:Port         Peer Address:Port</span><br><span class="line">tcp    LISTEN     0      128                        *:80                      *:*</span><br><span class="line">tcp    LISTEN     0      50                         *:4242                    *:*</span><br><span class="line">tcp    LISTEN     0      50                        :::4242                   :::*</span><br><span class="line">tcp    LISTEN     0      50                         *:2003                    *:*</span><br><span class="line">tcp    LISTEN     0      50                         *:2004                    *:*</span><br><span class="line">tcp    LISTEN     0      128                       :::22                     :::*</span><br><span class="line">tcp    LISTEN     0      128                        *:22                      *:*</span><br><span class="line">tcp    LISTEN     0      100                        *:3000                    *:*</span><br><span class="line">tcp    LISTEN     0      100                      ::1:25                     :::*</span><br><span class="line">tcp    LISTEN     0      100                127.0.0.1:25                      *:*</span><br><span class="line">tcp    LISTEN     0      50                         *:7002                    *:*</span><br></pre></td></tr></table></figure>
<ul>
<li>means the deamon is listening on all IP addresses the server might have.</li>
</ul>
<p>127.0.0.1 means the daemon is listening only to the loopback interface</p>
<p>::: is the same thing as *, but for IPv6</p>
<p>::1 is the same as 127.0.0.1, but for IPv6</p>
<h2 id="mtr"><a href="#mtr" class="headerlink" title="mtr"></a>mtr</h2><p>is a program that combines the functionality of ping and traceroute into one utility</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> mtr -r uow.edu.au</span><br><span class="line">Start: 2020-08-09T15:14:55+1000</span><br><span class="line">HOST: stan-OptiPlex-380           Loss%   Snt   Last   Avg  Best  Wrst StDev</span><br><span class="line">  1.|-- router.lan                 0.0%    10    0.4   0.4   0.3   0.4   0.0</span><br><span class="line">  2.|-- 58.162.27.77               0.0%    10    8.6  12.7   8.0  17.5   3.4</span><br><span class="line">  3.|-- 10.2.2.150                 0.0%    10    8.6  13.7   8.3  29.7   6.6</span><br><span class="line">  4.|-- 10.2.1.149                 0.0%    10   15.2  13.6  10.2  16.1   2.0</span><br><span class="line">  5.|-- Bundle-Ether77.chw-edge90  0.0%    10   12.2  14.0  10.1  23.7   3.9</span><br><span class="line">  6.|-- bundle-ether2.ken-edge903  0.0%    10   12.1  13.3   9.2  26.3   4.8</span><br><span class="line">  7.|-- aar3533567.lnk.telstra.ne  0.0%    10   14.3  14.1  10.4  31.7   6.5</span><br><span class="line">  8.|-- xe-0-2-1.pe1.rsby.nsw.aar  0.0%    10   12.7  12.0   8.9  14.8   2.2</span><br><span class="line">  9.|-- 138.44.5.111               0.0%    10   10.2  14.5  10.2  17.5   2.5</span><br><span class="line"> 10.|-- 203.10.91.20               0.0%    10   11.8  16.6   9.9  27.2   6.1</span><br><span class="line"> 11.|-- www.uow.edu.au             0.0%    10   11.8  13.7  11.8  16.4   1.5</span><br></pre></td></tr></table></figure>
<h2 id="iftop"><a href="#iftop" class="headerlink" title="iftop"></a>iftop</h2><p>Displays bandwith usage on a specific interface, broken down by remote host</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iftop -i eth0</span><br></pre></td></tr></table></figure>
<h2 id="iperf"><a href="#iperf" class="headerlink" title="iperf"></a>iperf</h2><p>a bandwidth testing utility. It consists of a daemon and client, running on separate machines.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iperf3 -c remote-host</span><br></pre></td></tr></table></figure>
<h2 id="Troubleshooting-layer-1-problems"><a href="#Troubleshooting-layer-1-problems" class="headerlink" title="Troubleshooting layer 1 problems"></a>Troubleshooting layer 1 problems</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip -s link show eth0</span><br><span class="line">sudo ethtool eth0</span><br><span class="line">## -S, which shows all the same metrics as the ip command, plus many, many more</span><br><span class="line">sudo ethtool -S eth0</span><br></pre></td></tr></table></figure>
<h2 id="HTTP-core-protocol"><a href="#HTTP-core-protocol" class="headerlink" title="HTTP core protocol"></a>HTTP core protocol</h2><h3 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h3><table>
<thead>
<tr>
<th>Method</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td align="center">Tranfers a current representation of the target resource.</td>
</tr>
<tr>
<td>HEAD</td>
<td align="center">Same as GET, but only transfer the status line and header section.</td>
</tr>
<tr>
<td>POST</td>
<td align="center">Perform resource-specific processing on the request payload.</td>
</tr>
<tr>
<td>PUT</td>
<td align="center">Replace all current representations of the target resource with the requested payload.</td>
</tr>
<tr>
<td>DELETE</td>
<td align="center">Remove all current representations of the target resource.</td>
</tr>
<tr>
<td>CONNECT</td>
<td align="center">Establish a tunnel to the server identified by the target resource.</td>
</tr>
<tr>
<td>OPTIONS</td>
<td align="center">Describe the communication options for the target resource.</td>
</tr>
<tr>
<td>TRACE</td>
<td align="center">Perform a message loop-back test along the path to the target resource.</td>
</tr>
</tbody></table>
<h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><table>
<thead>
<tr>
<th>Code</th>
<th align="center">Reason</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>200</td>
<td align="center">OK</td>
<td>The request has succeeded.</td>
</tr>
<tr>
<td>301</td>
<td align="center">Moved Permenantly</td>
<td>The target has moved to a new location and future references should use a new location. The server should mention the new location in the Location header in the response.</td>
</tr>
<tr>
<td>302</td>
<td align="center">Found</td>
<td>The target resources been temporarily moved. As the move is temporarily, future references should still use the same location.</td>
</tr>
<tr>
<td>400</td>
<td align="center">Bad Request</td>
<td>The server cannot process the request as it is perceived as invalid.</td>
</tr>
<tr>
<td>401</td>
<td align="center">Unauthorized</td>
<td>The request to the target resource is not allowed due to missing or incorrect authentication credentials.</td>
</tr>
<tr>
<td>403</td>
<td align="center">Forbidden</td>
<td>The request to the target resource is not allowed for reasons unrelated to authentication.</td>
</tr>
<tr>
<td>404</td>
<td align="center">Not Found</td>
<td>The target resource was not found.</td>
</tr>
<tr>
<td>500</td>
<td align="center">Internal Server Error</td>
<td>The server encountered an unexpected error.</td>
</tr>
<tr>
<td>502</td>
<td align="center">Bad Gateway</td>
<td>The server is acting as a gateway/proxy and received an invalid response from a server it contacted to fulfill the request.</td>
</tr>
<tr>
<td>503</td>
<td align="center">Service Unavailable</td>
<td>The server is currently unable to fulfill the request.</td>
</tr>
</tbody></table>
<h2 id="cURL"><a href="#cURL" class="headerlink" title="cURL"></a>cURL</h2><p>is a tool and library for transferring data with URL syntax, capable of handling various protocols.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl http:&#x2F;&#x2F;foobar&#x2F;index.html</span><br><span class="line">With the --request or -X parameter, the method can be specified. To include the the headers in the output.</span><br><span class="line">curl -I --request GET  http:&#x2F;&#x2F;www.opsschool.org&#x2F;en&#x2F;latest&#x2F;http_101.html</span><br><span class="line">The -O switch makes cURL write output to a local file named like the remote file.</span><br><span class="line">$ curl -O http:&#x2F;&#x2F;localhost&#x2F;bigfile</span><br></pre></td></tr></table></figure>
<p>By default cURL does not follow HTTP redirects, and instead a 3xx redirection message is given.<br>The -L switch makes cURL automatically follow redirects and issue another request to the given localtion till it finds the targeted resource.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -IL foobar.org</span><br></pre></td></tr></table></figure>
<h2 id="netcat"><a href="#netcat" class="headerlink" title="netcat"></a>netcat</h2><p>a networking tool capable of reading and writing data across a network connection.</p>
<h3 id="Basic-client-server"><a href="#Basic-client-server" class="headerlink" title="Basic client/server"></a>Basic client/server</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ nc -l 192.168.0.1 1234 &gt; output.log</span><br><span class="line">### then in another terminal, pipe some data to netcat that is connected to the destination ip and port</span><br><span class="line">$ echo &quot;I&#39;m connected as client&quot;| nc 192.168.0.1 1234</span><br><span class="line">## Then again in the first (server) terminal, the data is displayed:</span><br><span class="line">$ cat output.log</span><br><span class="line">I&#39;m connected as client</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/devops/">devops</a><a href="/tags/Linux/">Linux</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/06/28/puppet6/" title="puppet6" itemprop="url">puppet6</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="John Doe" target="_blank" itemprop="author">John Doe</a>
		
  <p class="article-time">
    <time datetime="2020-06-28T11:26:20.000Z" itemprop="datePublished"> Published 2020-06-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="puppet-6"><a href="#puppet-6" class="headerlink" title="puppet 6"></a>puppet 6</h1><h2 id="Local-environment-installation"><a href="#Local-environment-installation" class="headerlink" title="Local environment installation"></a>Local environment installation</h2><h3 id="Puppet-6-download"><a href="#Puppet-6-download" class="headerlink" title="Puppet 6 download"></a>Puppet 6 download</h3><p><a target="_blank" rel="noopener" href="http://apt.puppet.com/">http://apt.puppet.com/</a><br><a target="_blank" rel="noopener" href="http://yum.puppet.com/puppet6/">http://yum.puppet.com/puppet6/</a><br><a target="_blank" rel="noopener" href="http://downloads.puppet.com/windows/puppet6/">http://downloads.puppet.com/windows/puppet6/</a><br><a target="_blank" rel="noopener" href="http://yum.puppet.com/mac/puppet6/">http://yum.puppet.com/mac/puppet6/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vagrant plugin install vagrant-hostmanager</span><br><span class="line">vagrant plugin install vagrant-vbguest</span><br><span class="line">vagrant --version</span><br><span class="line">vboxmanage --version</span><br><span class="line">git --version</span><br><span class="line">vagrant status</span><br><span class="line">vagrant up centos</span><br><span class="line">vagrant hostmanager # updating hosts file on the vm </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="Types-and-providers"><a href="#Types-and-providers" class="headerlink" title="Types and providers"></a>Types and providers</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]# puppet resource package</span><br><span class="line">package &#123; &#39;NetworkManager&#39;:</span><br><span class="line">  ensure   &#x3D;&gt; &#39;1:1.18.4-3.el7&#39;,</span><br><span class="line">  provider &#x3D;&gt; &#39;yum&#39;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@centos ~]# puppet resource package|less</span><br><span class="line">[root@centos ~]# gem list</span><br><span class="line"></span><br><span class="line">*** LOCAL GEMS ***</span><br><span class="line"></span><br><span class="line">bigdecimal (1.2.0)</span><br><span class="line">io-console (0.4.2)</span><br><span class="line">json (1.7.7)</span><br><span class="line">psych (2.0.0)</span><br><span class="line">rdoc (4.0.0)</span><br><span class="line">[root@centos ~]# puppet resource package bigdecimal</span><br><span class="line">package &#123; &#39;bigdecimal&#39;:</span><br><span class="line">  ensure   &#x3D;&gt; [&#39;1.2.0&#39;],</span><br><span class="line">  provider &#x3D;&gt; &#39;gem&#39;,</span><br><span class="line">&#125;</span><br><span class="line">[root@centos ~]# puppet resource package git</span><br><span class="line">package &#123; &#39;git&#39;:</span><br><span class="line">  ensure   &#x3D;&gt; &#39;purged&#39;,</span><br><span class="line">  provider &#x3D;&gt; &#39;yum&#39;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Puppet-Master-installation"><a href="#Puppet-Master-installation" class="headerlink" title="Puppet Master installation"></a>Puppet Master installation</h2><p><a target="_blank" rel="noopener" href="https://github.com/PacktPublishing/Hands-On-Infrastructure-Automation-with-Puppet-6-V-" title="puppet 6">Hands-on-puppet-6</a></p>
<h2 id="Puppet-communication"><a href="#Puppet-communication" class="headerlink" title="Puppet communication"></a>Puppet communication</h2><h3 id="on-centos"><a href="#on-centos" class="headerlink" title="on centos:"></a>on centos:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[vagrant@centos ~]$ curl -v https:&#x2F;&#x2F;puppet:8140&#x2F;puppet-ca&#x2F;v1&#x2F;certificate&#x2F;ca</span><br><span class="line"></span><br><span class="line">[vagrant@centos ~]$ curl -v https:&#x2F;&#x2F;puppet:8140&#x2F;puppet-ca&#x2F;v1&#x2F;certificate&#x2F;ca -k</span><br><span class="line">* About to connect() to puppet port 8140 (#0)</span><br><span class="line">*   Trying 192.168.50.100...</span><br><span class="line">* Connected to puppet (192.168.50.100) port 8140 (#0)</span><br><span class="line">* Initializing NSS with certpath: sql:&#x2F;etc&#x2F;pki&#x2F;nssdb</span><br><span class="line">* skipping SSL peer certificate verification</span><br><span class="line">* NSS: client certificate not found (nickname not specified)</span><br></pre></td></tr></table></figure>

<h3 id="on-puppet"><a href="#on-puppet" class="headerlink" title="on puppet:"></a>on puppet:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@puppet ~]# puppetserver ca list</span><br><span class="line">Requested Certificates:</span><br><span class="line">    centos.example.com       (SHA256)  42:79:9E:79:A7:17:92:88:4C:E9:DE:A2:75:F0:03:5E:6A:7C:C4:D0:6B:AF:0E:F4:69:38:B8:9D:0F:E5:AE:5E</span><br><span class="line">[root@puppet ~]# puppetserver ca sign --cert centos.example.com</span><br><span class="line">Successfully signed certificate request for centos.example.com</span><br></pre></td></tr></table></figure>
<h3 id="check-cert-expired-date"><a href="#check-cert-expired-date" class="headerlink" title="check cert expired date"></a>check cert expired date</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@centos ~]# cd &#x2F;etc&#x2F;puppetlabs&#x2F;puppet&#x2F;ssl&#x2F;</span><br><span class="line">[root@centos ssl]# find .</span><br><span class="line">.</span><br><span class="line">.&#x2F;certs</span><br><span class="line">.&#x2F;certs&#x2F;ca.pem</span><br><span class="line">.&#x2F;certs&#x2F;centos.example.com.pem</span><br><span class="line">.&#x2F;public_keys</span><br><span class="line">.&#x2F;certificate_requests</span><br><span class="line">.&#x2F;private_keys</span><br><span class="line">.&#x2F;private_keys&#x2F;centos.example.com.pem</span><br><span class="line">.&#x2F;private</span><br><span class="line">.&#x2F;crl.pem</span><br><span class="line">root@centos ssl]# openssl x509 -in certs&#x2F;ca.pem -text -noout|less</span><br><span class="line">[root@centos ssl]# openssl x509 -in certs&#x2F;centos.example.com.pem -text -noout|less</span><br><span class="line">[root@centos ssl]# openssl verify -CAfile certs&#x2F;ca.pem certs&#x2F;centos.example.com.pem</span><br><span class="line">certs&#x2F;centos.example.com.pem: OK</span><br><span class="line"></span><br><span class="line">[root@centos ssl]# cat certs&#x2F;ca.pem crl.pem &gt; ca_crl.pem</span><br><span class="line">[root@centos ssl]# openssl verify -CAfile ca_crl.pem -crl_check certs&#x2F;centos.example.com.pem</span><br><span class="line">certs&#x2F;centos.example.com.pem: OK</span><br><span class="line">[root@centos ssl]# openssl x509 -in certs&#x2F;centos.example.com.pem -modulus -noout</span><br><span class="line">Modulus&#x3D;C57D960784B36EB5E316C1CFA95424062207356C0ACA2271C060120E77EDE0D44347D109982ABDC46F122AFAF85EE83CBE9684AA9E2164D40246D2C72CE9BB67C9C6544282829CC6B1D9100B0A32BAD630DB65EFA338ECE9B941CE2C19003A2AF8BAE7DDADA2A4F7279CC0E2916AB37A058F9CF8316D35BFA45BF5B0E178ACE928F77846FE0DB035CB584A7C2622DE7A48C959814E1AFB9F6B5F7F0BAC284F0EC336D1C376691F388328B1AF0037D1789C8D1D5D12AD72014706594B9EF9463B10EF3949BD193201334B46724525D164B57F3A1BB350C2915D9476FB66547B5F4E861FC60A4309D8739910E4603C3E5BF536D3BB4581F0789044110AF8350AB1E4189459035EDD1CD13B737D1A17F96026B83686EED285A51F06C5B9E840A6FCDC29C13ACBE7E8787EDC293479D0CFCDE95610C5E93A377F8C1F962001EF354F39359E39855CCC9FF1C9E7548FBA6143784F80C820D5EFE59F96AC78196D560195260F3E1B6A8A0354EDF3F5D368EC4EAF0F3C91CBF88E436C529136ACCA1A9E6CA7ABDCF22763C38A6E6B9CCF75C9570B03D74BB54A50D114B256A540AF6973A1327D9C4CAC7C244BCA33AE27B96668F1CC5ED8D0B808E150ECC56F2489F0CECEB18D8A6E403DF434246D30DE327FF53D9B770C80194ABE124E84E15737B57543E92D50B146BE5BB56618E42783E80E8D5FE18B1E8AA509FCE64FFDA3521019</span><br><span class="line">[root@centos ssl]# openssl x509 -in certs&#x2F;centos.example.com.pem -modulus -noout|sha256sum</span><br><span class="line">1527c07dedde5aed5061b7b2416c6d942c7cb66cd457ee545b02ef9934ca2e45  -</span><br><span class="line">[root@centos ssl]# openssl rsa -in private_keys&#x2F;centos.example.com.pem -modulus -noout</span><br><span class="line">Modulus&#x3D;C57D960784B36EB5E316C1CFA95424062207356C0ACA2271C060120E77EDE0D44347D109982ABDC46F122AFAF85EE83CBE9684AA9E2164D40246D2C72CE9BB67C9C6544282829CC6B1D9100B0A32BAD630DB65EFA338ECE9B941CE2C19003A2AF8BAE7DDADA2A4F7279CC0E2916AB37A058F9CF8316D35BFA45BF5B0E178ACE928F77846FE0DB035CB584A7C2622DE7A48C959814E1AFB9F6B5F7F0BAC284F0EC336D1C376691F388328B1AF0037D1789C8D1D5D12AD72014706594B9EF9463B10EF3949BD193201334B46724525D164B57F3A1BB350C2915D9476FB66547B5F4E861FC60A4309D8739910E4603C3E5BF536D3BB4581F0789044110AF8350AB1E4189459035EDD1CD13B737D1A17F96026B83686EED285A51F06C5B9E840A6FCDC29C13ACBE7E8787EDC293479D0CFCDE95610C5E93A377F8C1F962001EF354F39359E39855CCC9FF1C9E7548FBA6143784F80C820D5EFE59F96AC78196D560195260F3E1B6A8A0354EDF3F5D368EC4EAF0F3C91CBF88E436C529136ACCA1A9E6CA7ABDCF22763C38A6E6B9CCF75C9570B03D74BB54A50D114B256A540AF6973A1327D9C4CAC7C244BCA33AE27B96668F1CC5ED8D0B808E150ECC56F2489F0CECEB18D8A6E403DF434246D30DE327FF53D9B770C80194ABE124E84E15737B57543E92D50B146BE5BB56618E42783E80E8D5FE18B1E8AA509FCE64FFDA3521019</span><br><span class="line">[root@centos ssl]# openssl rsa -in private_keys&#x2F;centos.example.com.pem -modulus -noout|sha256sum</span><br><span class="line">1527c07dedde5aed5061b7b2416c6d942c7cb66cd457ee545b02ef9934ca2e45  -</span><br></pre></td></tr></table></figure>
<h2 id="Catalogs-and-environments"><a href="#Catalogs-and-environments" class="headerlink" title="Catalogs and environments"></a>Catalogs and environments</h2><p>When apply puppet code to a machine or node, need to compile the code into a catalog.<br>The catalog is a representation of the code as a graph.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@puppet manifests]# cd &#x2F;opt&#x2F;puppetlabs&#x2F;puppet&#x2F;cache&#x2F;</span><br><span class="line">[root@puppet cache]# ls</span><br><span class="line">clientbucket  client_data  client_yaml  facts.d  lib  locales  preview  reports  state</span><br><span class="line">[root@puppet cache]# cd client_data&#x2F;catalog&#x2F;</span><br><span class="line">[root@puppet catalog]# cat puppet.example.com.json |python -m json.tool|less</span><br></pre></td></tr></table></figure>
<h3 id="Environments"><a href="#Environments" class="headerlink" title="Environments"></a>Environments</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@puppet environments]# ls</span><br><span class="line">production  sandbox</span><br><span class="line">[root@puppet environments]# cd sandbox&#x2F;</span><br><span class="line">[root@puppet sandbox]# ls</span><br><span class="line">data  environment.conf  hiera.yaml  manifests  modules</span><br><span class="line">[root@puppet sandbox]# cd manifests&#x2F;</span><br><span class="line">[root@puppet manifests]# ls</span><br><span class="line">site.pp</span><br><span class="line">[root@puppet manifests]# vi site.pp</span><br><span class="line">[root@puppet manifests]# puppet agent -t --environment sandbox</span><br><span class="line">Info: Using configured environment &#39;sandbox&#39;</span><br><span class="line">Info: Retrieving pluginfacts</span><br><span class="line">Info: Retrieving plugin</span><br><span class="line">Info: Retrieving locales</span><br><span class="line">Info: Caching catalog for puppet.example.com</span><br><span class="line">Info: Applying configuration version &#39;1593430390&#39;</span><br><span class="line">Notice: This is the sandbox environment</span><br><span class="line">Notice: &#x2F;Stage[main]&#x2F;Main&#x2F;Node[default]&#x2F;Notify[This is the sandbox environment]&#x2F;message: defined &#39;message&#39; as &#39;This is the sandbox environment&#39;</span><br><span class="line">Notice: Applied catalog in 0.01 seconds</span><br><span class="line">[root@puppet manifests]# puppet agent -t</span><br><span class="line">Info: Using configured environment &#39;production&#39;</span><br><span class="line">Info: Retrieving pluginfacts</span><br><span class="line">Info: Retrieving plugin</span><br><span class="line">Info: Retrieving locales</span><br><span class="line">Info: Caching catalog for puppet.example.com</span><br><span class="line">Info: Applying configuration version &#39;1593430423&#39;</span><br><span class="line">Notice: This is production, only approved code is permitted</span><br><span class="line">Notice: &#x2F;Stage[main]&#x2F;Main&#x2F;Node[default]&#x2F;Notify[This is production, only approved code is permitted]&#x2F;message: defined &#39;message&#39; as &#39;This is production, only approved code is permitted&#39;</span><br><span class="line">Notice: Applied catalog in 0.01 seconds</span><br><span class="line">[root@puppet manifests]# vi &#x2F;etc&#x2F;puppetlabs&#x2F;puppet&#x2F;puppet.conf</span><br><span class="line">add:</span><br><span class="line">[agent]</span><br><span class="line">environment&#x3D;sandbox</span><br><span class="line">[root@puppet manifests]# puppet agent -t</span><br><span class="line">Info: Using configured environment &#39;sandbox&#39;</span><br><span class="line">Info: Retrieving pluginfacts</span><br><span class="line">Info: Retrieving plugin</span><br><span class="line">Info: Retrieving locales</span><br><span class="line">Info: Caching catalog for puppet.example.com</span><br><span class="line">Info: Applying configuration version &#39;1593430508&#39;</span><br><span class="line">Notice: This is the sandbox environment</span><br><span class="line">Notice: &#x2F;Stage[main]&#x2F;Main&#x2F;Node[default]&#x2F;Notify[This is the sandbox environment]&#x2F;message: defined &#39;message&#39; as &#39;This is the sandbox environment&#39;</span><br><span class="line">Notice: Applied catalog in 0.01 seconds</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/BGh6QOP.png" alt="environments"></p>
<h2 id="Modules-and-Puppet-Forge"><a href="#Modules-and-Puppet-Forge" class="headerlink" title="Modules and Puppet Forge"></a>Modules and Puppet Forge</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@puppet ~]# puppet module install puppetlabs-apache</span><br><span class="line">Notice: Preparing to install into &#x2F;etc&#x2F;puppetlabs&#x2F;code&#x2F;environments&#x2F;production&#x2F;modules ...</span><br><span class="line">Notice: Downloading from https:&#x2F;&#x2F;forgeapi.puppet.com ...</span><br><span class="line">Notice: Installing -- do not interrupt ...</span><br><span class="line">&#x2F;etc&#x2F;puppetlabs&#x2F;code&#x2F;environments&#x2F;production&#x2F;modules</span><br><span class="line">└─┬ puppetlabs-apache (v5.4.0)</span><br><span class="line">  ├─┬ puppetlabs-concat (v6.2.0)</span><br><span class="line">  │ └── puppetlabs-translate (v2.2.0)</span><br><span class="line">  └── puppetlabs-stdlib (v6.3.0)</span><br><span class="line">[root@puppet ~]# cat &#x2F;etc&#x2F;puppetlabs&#x2F;puppet&#x2F;puppet.conf</span><br><span class="line"># This file can be used to override the default puppet settings.</span><br><span class="line"># See the following links for more details on what settings are available:</span><br><span class="line"># - https:&#x2F;&#x2F;puppet.com&#x2F;docs&#x2F;puppet&#x2F;latest&#x2F;config_important_settings.html</span><br><span class="line"># - https:&#x2F;&#x2F;puppet.com&#x2F;docs&#x2F;puppet&#x2F;latest&#x2F;config_about_settings.html</span><br><span class="line"># - https:&#x2F;&#x2F;puppet.com&#x2F;docs&#x2F;puppet&#x2F;latest&#x2F;config_file_main.html</span><br><span class="line"># - https:&#x2F;&#x2F;puppet.com&#x2F;docs&#x2F;puppet&#x2F;latest&#x2F;configuration.html</span><br><span class="line">[master]</span><br><span class="line">vardir &#x3D; &#x2F;opt&#x2F;puppetlabs&#x2F;server&#x2F;data&#x2F;puppetserver</span><br><span class="line">logdir &#x3D; &#x2F;var&#x2F;log&#x2F;puppetlabs&#x2F;puppetserver</span><br><span class="line">rundir &#x3D; &#x2F;var&#x2F;run&#x2F;puppetlabs&#x2F;puppetserver</span><br><span class="line">pidfile &#x3D; &#x2F;var&#x2F;run&#x2F;puppetlabs&#x2F;puppetserver&#x2F;puppetserver.pid</span><br><span class="line">codedir &#x3D; &#x2F;etc&#x2F;puppetlabs&#x2F;code</span><br><span class="line">[agent]</span><br><span class="line">environment&#x3D;sandbox</span><br><span class="line">[root@puppet ~]# puppet config print modulepath</span><br><span class="line">&#x2F;etc&#x2F;puppetlabs&#x2F;code&#x2F;environments&#x2F;production&#x2F;modules:&#x2F;etc&#x2F;puppetlabs&#x2F;code&#x2F;modules:&#x2F;opt&#x2F;puppetlabs&#x2F;puppet&#x2F;modules</span><br><span class="line">[root@puppet ~]# puppet config print environment</span><br><span class="line">production</span><br><span class="line">[root@puppet ~]# puppet config print environment --section&#x3D;agent</span><br><span class="line">sandbox</span><br><span class="line">[root@puppet production]# which gem</span><br><span class="line">&#x2F;bin&#x2F;gem</span><br><span class="line">[root@puppet production]# vi Puppetfile</span><br><span class="line">mod &#39;puppetlabs&#x2F;vcsrepo&#39;</span><br><span class="line">mod &#39;puppetlabs&#x2F;apache&#39;</span><br><span class="line">mod &#39;first&#39;,</span><br><span class="line">   :git &#x3D;&gt; &#39;https:&#x2F;&#x2F;github.com&#x2F;uphillian&#x2F;uphillian-sample.git&#39;,</span><br><span class="line">   :ref &#x3D;&gt; &#39;master&#39;</span><br><span class="line">   </span><br><span class="line">[root@puppet production]# export PATH&#x3D;&#x2F;opt&#x2F;puppetlabs&#x2F;puppet&#x2F;bin:&#x2F;opt&#x2F;puppetlabs&#x2F;bin:$PATH</span><br><span class="line">[root@puppet production]# which gem</span><br><span class="line">&#x2F;opt&#x2F;puppetlabs&#x2F;puppet&#x2F;bin&#x2F;gem</span><br><span class="line">[root@puppet production]# gem install r10k</span><br><span class="line">[root@puppet production]# r10k</span><br><span class="line">NAME</span><br><span class="line">    r10k - Killer robot powered Puppet environment deployment</span><br><span class="line">    </span><br><span class="line">[root@puppet production]# r10k puppetfile install</span><br><span class="line">[root@puppet production]# ls modules</span><br><span class="line">apache  first  vcsrepo</span><br></pre></td></tr></table></figure>
<h3 id="concat-Module"><a href="#concat-Module" class="headerlink" title="concat Module"></a>concat Module</h3><p><a target="_blank" rel="noopener" href="https://github.com/puppetlabs/puppetlabs-concat">concat</a><br><a target="_blank" rel="noopener" href="https://forge.puppet.com/puppetlabs/concat">concat forge</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">[root@puppet production]# pwd</span><br><span class="line">&#x2F;etc&#x2F;puppetlabs&#x2F;code&#x2F;environments&#x2F;production</span><br><span class="line">[root@puppet production]# cat Puppetfile</span><br><span class="line">mod &#39;puppetlabs&#x2F;vcsrepo&#39;</span><br><span class="line">mod &#39;puppetlabs&#x2F;apache&#39;</span><br><span class="line">mod &#39;puppetlabs&#x2F;stdlib&#39;</span><br><span class="line">mod &#39;puppetlabs&#x2F;concat&#39;</span><br><span class="line">mod &#39;first&#39;,</span><br><span class="line">   :git &#x3D;&gt; &#39;https:&#x2F;&#x2F;github.com&#x2F;uphillian&#x2F;uphillian-sample.git&#39;,</span><br><span class="line">   :ref &#x3D;&gt; &#39;master&#39;</span><br><span class="line">[root@puppet production]# r10k puppetfile install</span><br><span class="line">[root@puppet production]# cd modules&#x2F;</span><br><span class="line">[root@puppet modules]# ls</span><br><span class="line">apache  concat  first  stdlib  vcsrepo</span><br><span class="line">[root@puppet modules]# cd ..&#x2F;manifests&#x2F;</span><br><span class="line">[root@puppet manifests]# ls</span><br><span class="line">site-2.pp  site.pp</span><br><span class="line">[root@puppet manifests]# cat site-2.pp</span><br><span class="line">concat &#123;&#39;&#x2F;etc&#x2F;motd&#39;: &#125;</span><br><span class="line"></span><br><span class="line">package &#123; &#39;epel-release&#39;:</span><br><span class="line">  ensure &#x3D;&gt; &#39;installed&#39;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">package &#123; &#39;figlet&#39;:</span><br><span class="line">  ensure &#x3D;&gt; &#39;installed&#39;,</span><br><span class="line">  require &#x3D;&gt; Package[&#39;epel-release&#39;],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exec &#123;&#39;motd.hostname&#39;:</span><br><span class="line">  path    &#x3D;&gt; &#39;&#x2F;bin:&#x2F;usr&#x2F;bin&#39;,</span><br><span class="line">  command &#x3D;&gt; &quot;figlet $hostname &gt;&#x2F;etc&#x2F;motd.hostname&quot;,</span><br><span class="line">  creates &#x3D;&gt; &#39;&#x2F;etc&#x2F;motd.hostname&#39;,</span><br><span class="line">  require &#x3D;&gt; Package[&#39;figlet&#39;],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exec &#123;&#39;motd.warning&#39;:</span><br><span class="line">  path    &#x3D;&gt; &#39;&#x2F;bin:&#x2F;usr&#x2F;bin&#39;,</span><br><span class="line">  command &#x3D;&gt; &quot;figlet &#39;* WARNING *&#39;&gt;&#x2F;etc&#x2F;motd.warning&quot;,</span><br><span class="line">  creates &#x3D;&gt; &#39;&#x2F;etc&#x2F;motd.warning&#39;,</span><br><span class="line">  require &#x3D;&gt; Package[&#39;figlet&#39;],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concat::fragment &#123; &#39;hostname&#39;:</span><br><span class="line">  target  &#x3D;&gt; &#39;&#x2F;etc&#x2F;motd&#39;,</span><br><span class="line">  source  &#x3D;&gt; &#39;&#x2F;etc&#x2F;motd.hostname&#39;,</span><br><span class="line">  order   &#x3D;&gt; &#39;01&#39;,</span><br><span class="line">  require &#x3D;&gt; Exec[&#39;motd.hostname&#39;],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concat::fragment &#123; &#39;info&#39;:</span><br><span class="line">  target &#x3D;&gt; &#39;&#x2F;etc&#x2F;motd&#39;,</span><br><span class="line">  content &#x3D;&gt; &quot;$&#123;fact(&#39;os.name&#39;)&#125; $&#123;fact(&#39;os.release.major&#39;)&#125;\n&quot;,</span><br><span class="line">  order &#x3D;&gt; &#39;05&#39;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$disclaimer &#x3D; @(END)</span><br><span class="line">  -----------------------------------------------------------</span><br><span class="line">  This system is for the use of authorized users only.</span><br><span class="line">  Individuals using this computer system without authority,</span><br><span class="line">  or in excess of their authority, are subject to having all</span><br><span class="line">  of their activities on the system monitored and recorded.</span><br><span class="line">  This information will be shared with law enforcement should</span><br><span class="line">  any wrong doing be suspected.</span><br><span class="line">  -----------------------------------------------------------</span><br><span class="line"></span><br><span class="line">  | END</span><br><span class="line"></span><br><span class="line">concat::fragment &#123; &#39;warning&#39;:</span><br><span class="line">  target &#x3D;&gt; &#39;&#x2F;etc&#x2F;motd&#39;,</span><br><span class="line">  source &#x3D;&gt; &#39;&#x2F;etc&#x2F;motd.warning&#39;,</span><br><span class="line">  order  &#x3D;&gt; &#39;10&#39;,</span><br><span class="line">&#125;</span><br><span class="line">concat::fragment &#123; &#39;disclaimer&#39;:</span><br><span class="line">  target  &#x3D;&gt; &#39;&#x2F;etc&#x2F;motd&#39;,</span><br><span class="line">  content &#x3D;&gt; $disclaimer,</span><br><span class="line">  order   &#x3D;&gt; &#39;20&#39;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># run</span><br><span class="line">puppet agent -t</span><br><span class="line">[root@puppet manifests]# cat &#x2F;etc&#x2F;motd</span><br><span class="line">                              _</span><br><span class="line"> _ __  _   _ _ __  _ __   ___| |_</span><br><span class="line">| &#39;_ \| | | | &#39;_ \| &#39;_ \ &#x2F; _ \ __|</span><br><span class="line">| |_) | |_| | |_) | |_) |  __&#x2F; |_</span><br><span class="line">| .__&#x2F; \__,_| .__&#x2F;| .__&#x2F; \___|\__|</span><br><span class="line">|_|         |_|   |_|</span><br><span class="line">CentOS 7</span><br><span class="line">       __        ___    ____  _   _ ___ _   _  ____</span><br><span class="line">__&#x2F;\__ \ \      &#x2F; &#x2F; \  |  _ \| \ | |_ _| \ | |&#x2F; ___| __&#x2F;\__</span><br><span class="line">\    &#x2F;  \ \ &#x2F;\ &#x2F; &#x2F; _ \ | |_) |  \| || ||  \| | |  _  \    &#x2F;</span><br><span class="line">&#x2F;_  _\   \ V  V &#x2F; ___ \|  _ &lt;| |\  || || |\  | |_| | &#x2F;_  _\</span><br><span class="line">  \&#x2F;      \_&#x2F;\_&#x2F;_&#x2F;   \_\_| \_\_| \_|___|_| \_|\____|   \&#x2F;</span><br><span class="line"></span><br><span class="line">-----------------------------------------------------------</span><br><span class="line">This system is for the use of authorized users only.</span><br><span class="line">Individuals using this computer system without authority,</span><br><span class="line">or in excess of their authority, are subject to having all</span><br><span class="line">of their activities on the system monitored and recorded.</span><br><span class="line">This information will be shared with law enforcement should</span><br><span class="line">any wrong doing be suspected.</span><br><span class="line">-----------------------------------------------------------</span><br></pre></td></tr></table></figure>
<h2 id="Puppet-Lookup"><a href="#Puppet-Lookup" class="headerlink" title="Puppet Lookup"></a>Puppet Lookup</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">puppet lookup role::cms::docroot</span><br><span class="line">puppet lookup role::cms::docroot --explain</span><br><span class="line">puppet lookup --node ubuntu.expale.com role::cms::docroot</span><br><span class="line">[root@puppet manifests]# cat scope.pp</span><br><span class="line">class role::scope (</span><br><span class="line">  String $example &#x3D; &quot;A scoped variable&quot;</span><br><span class="line">) &#123;</span><br><span class="line">  # do nothing</span><br><span class="line">  &#125;</span><br><span class="line">[root@puppet manifests]# pwd</span><br><span class="line">&#x2F;etc&#x2F;puppetlabs&#x2F;code&#x2F;environments&#x2F;production&#x2F;modules&#x2F;role&#x2F;manifests</span><br><span class="line">[root@puppet manifests]# cat scope.pp</span><br><span class="line">class role::scope (</span><br><span class="line">  String $example &#x3D; &quot;A scoped variable&quot;</span><br><span class="line">) &#123;</span><br><span class="line">  # do nothing</span><br><span class="line">  &#125;</span><br><span class="line">[root@puppet manifests]# cat &#x2F;root&#x2F;scope.pp</span><br><span class="line">include role::scope</span><br><span class="line">notify &#123; &quot;role::scope::example is $&#123;::role::scope::example&#125;&quot;: &#125;</span><br><span class="line">[root@puppet manifests]# puppet apply &#x2F;root&#x2F;scope.pp</span><br><span class="line">Notice: Compiled catalog for puppet.example.com in environment production in 0.01 seconds</span><br><span class="line">Notice: role::scope::example is A scoped variable</span><br><span class="line">Notice: &#x2F;Stage[main]&#x2F;Main&#x2F;Notify[role::scope::example is A scoped variable]&#x2F;message: defined &#39;message&#39; as &#39;role::scope::example is A scoped variable&#39;</span><br><span class="line">Notice: Applied catalog in 0.01 seconds</span><br></pre></td></tr></table></figure>
<h3 id="famlfile-puppet-provider-yaml-file-manipluation"><a href="#famlfile-puppet-provider-yaml-file-manipluation" class="headerlink" title="famlfile: puppet provider yaml file manipluation"></a>famlfile: puppet provider yaml file manipluation</h3><p><a target="_blank" rel="noopener" href="https://forge.puppet.com/reidmv/yamlfile/types">reidmv yamlfile</a></p>
<h2 id="puppet-cookbook"><a href="#puppet-cookbook" class="headerlink" title="puppet cookbook"></a>puppet cookbook</h2><p><a target="_blank" rel="noopener" href="https://www.puppetcookbook.com/">cookbook</a></p>
<h2 id="Configure-r10k"><a href="#Configure-r10k" class="headerlink" title="Configure r10k"></a>Configure r10k</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo puppet module install puppet&#x2F;r10k --modulepath&#x3D;&#x2F;etc&#x2F;puppetlabs&#x2F;code&#x2F;modules&#x2F;</span><br><span class="line">sudo puppet apply -e &#39;class &#123;&quot;r10k&quot;: remote &#x3D;&gt; &quot;https:&#x2F;&#x2F;github.com&#x2F;stanosaka&#x2F;control-repo&quot;&#125;&#39; --modulepath&#x3D;&#x2F;etc&#x2F;puppetlabs&#x2F;code&#x2F;modules&#x2F;</span><br><span class="line">r10k deploy environment -p</span><br></pre></td></tr></table></figure>
<p>in control-repo Settings webhooks<br>Payload URL: <a target="_blank" rel="noopener" href="http://puppet:puppet@foobar.cwzhou.win:8088/payload">http://puppet:puppet@foobar.cwzhou.win:8088/payload</a><br><a target="_blank" rel="noopener" href="https://github.com/Zetten/puppet-hiera-enc">Hiera-based Puppet ENC</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/devops/">devops</a><a href="/tags/puppet/">puppet</a><a href="/tags/puppet6/">puppet6</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/">Next&lt;span&gt;&lt;&#x2F;span&gt;</a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github Card</p>
<div class="github-card" data-github="stanosaka" data-theme="medium"></div>
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>



  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/devops/" title="devops">devops<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/aws/" title="aws">aws<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/CICD/" title="CICD">CICD<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/centos/" title="centos">centos<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Jenkins/" title="Jenkins">Jenkins<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/mysql/" title="mysql">mysql<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/SRE/" title="SRE">SRE<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/azure/" title="azure">azure<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/git/" title="git">git<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/tomcat/" title="tomcat">tomcat<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/saltstack/" title="saltstack">saltstack<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/zabbix/" title="zabbix">zabbix<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/IaC/" title="IaC">IaC<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ec2/" title="ec2">ec2<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/backup/" title="backup">backup<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/github/" title="github">github<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/nginx/" title="nginx">nginx<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/puppet/" title="puppet">puppet<sup>2</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://github.com/kahun/awesome-sysadmin" target="_blank" title="Awesome-sysadmin">Awesome-sysadmin</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/crazy-canux/awesome-monitoring" target="_blank" title="Awesome-monitoring">Awesome-monitoring</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.opsschool.org/index.html" target="_blank" title="Ops School Curriculum">Ops School Curriculum</a>
            
          </li>
        
          <li>
            
            	<a href="https://kupczynski.info/2018/04/18/spacemacs.html" target="_blank" title="Learning Spacemacs">Learning Spacemacs</a>
            
          </li>
        
          <li>
            
            	<a href="https://landing.google.com/sre/books/" target="_blank" title="SRE Books">SRE Books</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/aws-samples" target="_blank" title="AWS Samples">AWS Samples</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/bikrambora/devlab-launchpad" target="_blank" title="Welcome to Dev Labs">Dev Labs</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/ansible/ansible-examples" target="_blank" title="Ansible GitHub repo">Ansible GitHub repo</a>
            
          </li>
        
          <li>
            
            	<a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html" target="_blank" title="Ansible Best Practices">Ansible Best Practices</a>
            
          </li>
        
          <li>
            
            	<a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/" target="_blank" title="kubectl cheat sheet">kubectl cheat sheet</a>
            
          </li>
        
          <li>
            
            	<a href="http://rogerdudler.github.io/git-guide" target="_blank" title="Git commands">Git commands</a>
            
          </li>
        
          <li>
            
            	<a href="https://docs.docker.com/engine/reference/builder/" target="_blank" title="Dockerfile reference">Dockerfile reference</a>
            
          </li>
        
          <li>
            
            	<a href="http://bit.ly/2mTQr8l" target="_blank" title="Linux Command line cheat sheet">Linux Command line cheat sheet</a>
            
          </li>
        
          <li>
            
            	<a href="http://bit.ly/2EPHxze" target="_blank" title="PowerShell Basic Cheat Sheet">PowerShell Basic Cheat Sheet</a>
            
          </li>
        
          <li>
            
            	<a href="http://sed.sourceforge.net/sed1line_zh-CN.html" target="_blank" title="sed cheatsheet">sed cheatsheet</a>
            
          </li>
        
          <li>
            
            	<a href="http://obsavus1p.bkt.clouddn.com/vim_cheat_sheet_for_programmers_print.png" target="_blank" title="vim cheatsheet">vim cheatsheet</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.gitbook.com/book/yeasy/docker_practice/details" target="_blank" title="Learn Docker">Learn Docker</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.unixhot.com/page/ops" target="_blank" title="运维知识体系">运维知识体系</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.tecmint.com/" target="_blank" title="tecmint">tecmint</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.lib.uts.edu.au" target="_blank" title="shoujin.wang@student.uts.edu.au">UTS Library</a>
            
          </li>
        
          <li>
            
            	<a href="https://7esl.com" target="_blank" title="ESL">ESL</a>
            
          </li>
        
          <li>
            
            	<a href="https://stanchou.wordpress.com" target="_blank" title="Stan&#39;s wordpress">Stan&#39;s wordpress</a>
            
          </li>
        
          <li>
            
            	<a href="https://docs.00root.com" target="_blank" title="Stan&#39;s gitbook">Stan&#39;s gitbook</a>
            
          </li>
        
          <li>
            
            	<a href="https://api.ipify.org" target="_blank" title="Your IP address">Your IP address</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/stanosaka/oreilly_sql_fundamentals_for_data/blob/master/notes_and_slides/sql_fundamentals_notes.md" target="_blank" title="sql fundamentials">sql fundamentials</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.nerdfonts.com" target="_blank" title="Nred Fonts">Nred Fonts</a>
            
          </li>
        
          <li>
            
            	<a href="http://cb.vu/unixtoolbox.xhtml" target="_blank" title="UNIX TOOLBOX">UNIX TOOLBOX</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/Ben-PH/spacemacs-cheatsheet" target="_blank" title="spacemacs-cheatsheet">spacemacs-cheatsheet</a>
            
          </li>
        
          <li>
            
            	<a href="https://rubular.com/" target="_blank" title="Regular expression editor 1">Regular expression editor 1</a>
            
          </li>
        
          <li>
            
            	<a href="https://pythex.org/" target="_blank" title="Regular expression editor 2">Regular expression editor 2</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Stan. <br/>
			I am a Site Reliability Engineer working and living in Sydney.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/stanosaka" target="_blank" class="icon-github" title="github"></a>
		
		
		<a href="http://stackoverflow.com/users/6724938" target="_blank" class="icon-stack-overflow" title="stackoverflow"></a>
		
		
		<a href="https://twitter.com/stanosaka" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/stan.osaka" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		<a href="https://www.linkedin.com/in/00root" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		<a href="https://www.douban.com/people/btw01v" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="http://www.zhihu.com/people/stan-22-82" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:devops@cwzhou.win" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2021 
		
		<a href="/about" target="_blank" title="John Doe">John Doe</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
