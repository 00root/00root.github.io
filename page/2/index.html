
 <!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
    <title>Stan Zhou&#39;s Hexo Technical Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Stan Zhou">
    

    
    <meta name="description" content="a Site Reliability Engineer working and living in Sydney.">
<meta property="og:type" content="website">
<meta property="og:title" content="Stan Zhou&#39;s Hexo Technical Blog">
<meta property="og:url" content="http://cwzhou.win/page/2/index.html">
<meta property="og:site_name" content="Stan Zhou&#39;s Hexo Technical Blog">
<meta property="og:description" content="a Site Reliability Engineer working and living in Sydney.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Stan Zhou">
<meta property="article:tag" content="SRE">
<meta property="article:tag" content="Devops">
<meta property="article:tag" content="Cloud Native">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@stanosaka">

    
    <link rel="alternative" href="/atom.xml" title="Stan Zhou&#39;s Hexo Technical Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/toad.ico">
    
    
    <link rel="apple-touch-icon" href="/img/toadman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/toadman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/%02.css">
<link rel="stylesheet" href="/.css">

<meta name="generator" content="Hexo 5.4.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/toadman.png" alt="Stan Zhou&#39;s Hexo Technical Blog" title="Stan Zhou&#39;s Hexo Technical Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Stan Zhou&#39;s Hexo Technical Blog">Stan Zhou&#39;s Hexo Technical Blog</a></h1>
				<h2 class="blog-motto">Innovation Evangelist</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:cwzhou.win">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/06/14/azure/" title="azure" itemprop="url">azure</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2020-06-14T09:38:55.000Z" itemprop="datePublished"> Published 2020-06-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Azure-architecturue-foundations"><a href="#Azure-architecturue-foundations" class="headerlink" title="Azure architecturue foundations"></a>Azure architecturue foundations</h1><blockquote>
<p>subscriptions, management, governance</p>
</blockquote>
<h2 id="Resource-organization"><a href="#Resource-organization" class="headerlink" title="Resource organization"></a>Resource organization</h2><ul>
<li>Management group for each environment (Prod, Dev, and Test)</li>
<li>Subscription for each “application categorization”</li>
<li>Separate resource group for each application</li>
<li>Consistent nomenclature at each level of this hierarchy<br><img src="https://i.imgur.com/jpBakdZ.png" alt="resource organization" title="resource organization"> <h2 id="Naming-Standards"><a href="#Naming-Standards" class="headerlink" title="Naming Standards"></a>Naming Standards</h2></li>
<li>Azure resource names are important</li>
<li>it’s difficult to change names later</li>
<li>Names must meet requirements specific to their resource type<br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/naming-and-tagging">naming and tagging</a><h2 id="Organize-resources-by-Tag"><a href="#Organize-resources-by-Tag" class="headerlink" title="Organize resources by Tag"></a>Organize resources by Tag</h2></li>
<li>Allows you to add metadata to Azure resources</li>
<li>Allows you to query resources using the same tags</li>
<li>Not all resource types support tags<h2 id="Azure-policy-and-RBAC"><a href="#Azure-policy-and-RBAC" class="headerlink" title="Azure policy and RBAC"></a>Azure policy and RBAC</h2></li>
<li>Policies enforce rules against your resources</li>
<li>Role-based access control (RBAC) controls user actions<h2 id="Resource-locks"><a href="#Resource-locks" class="headerlink" title="Resource locks"></a>Resource locks</h2></li>
<li>Prevent accidental resource changes<h2 id="Monitorinig-and-alerting"><a href="#Monitorinig-and-alerting" class="headerlink" title="Monitorinig and alerting"></a>Monitorinig and alerting</h2><img src="https://i.imgur.com/5mS3fbB.png" alt="monitoring and alerting"> </li>
</ul>
<h1 id="Cloud-application-architecture"><a href="#Cloud-application-architecture" class="headerlink" title="Cloud application architecture"></a>Cloud application architecture</h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/architecture/" title="Azure architecture center">Azure architecture center</a></p>
<h1 id="N-tier-application-architecture"><a href="#N-tier-application-architecture" class="headerlink" title="N-tier application architecture"></a>N-tier application architecture</h1><p><img src="https://i.imgur.com/ziZzQrN.png" alt="n-tier applicatioin architecuture"></p>
<h1 id="Hybrid-cloud-architecture"><a href="#Hybrid-cloud-architecture" class="headerlink" title="Hybrid cloud architecture"></a>Hybrid cloud architecture</h1><p><img src="https://i.imgur.com/VxYsaXo.png" alt="hybrid cloud architecture"></p>
<p>Azure bastion</p>
<h1 id="setup-storage-account-readonly-account"><a href="#setup-storage-account-readonly-account" class="headerlink" title="setup storage account readonly account"></a>setup storage account readonly account</h1><p>The few roles have given to user:</p>
<ol>
<li>Reader on subscription: let user view everthing, but not make any change</li>
<li>Storage Blob Data Reader on Storage account: Read and list azure storage containers and blobs.</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/azure/">azure</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/04/26/puppet/" title="puppet" itemprop="url">puppet</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2020-04-26T12:41:23.000Z" itemprop="datePublished"> Published 2020-04-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Puppet-Code-Directory-Layout"><a href="#Puppet-Code-Directory-Layout" class="headerlink" title="Puppet Code Directory Layout"></a>Puppet Code Directory Layout</h1><p>environments/production/:<br>manifests/:Puppet manifests<br>modules/: Puppet modules<br>data/: Hiera data<br>hiera.yaml: Hiera configuration</p>
<h1 id="add-cert-autosign"><a href="#add-cert-autosign" class="headerlink" title="add cert autosign"></a>add cert autosign</h1><p>cat /etc/puppetlabs/puppet/autosign.conf<br>add the hostname or *.foobar</p>
<p>add a line in /etc/puppetlabs/puppet/puppet.conf<br>autosign = true</p>
<h1 id="Puppet-5-essentials"><a href="#Puppet-5-essentials" class="headerlink" title="Puppet 5 essentials"></a>Puppet 5 essentials</h1><h2 id="resources-parameters-and-properties"><a href="#resources-parameters-and-properties" class="headerlink" title="resources, parameters, and properties"></a>resources, parameters, and properties</h2><p>Resources are the elementray builing blocks of manifests.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># cat puppet_service.pp</span><br><span class="line">service &#123; &#39;puppet&#39;:</span><br><span class="line">  ensure &#x3D;&gt; &#39;stopped&#39;,</span><br><span class="line">  enable &#x3D;&gt; false,</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>Each has a type (service) and a name or title (puppet). Each resource is unique to a manifest, and can be referenced by the combination of its<br>type and name, such as Server[“puppet”].<br>A resource comprises a list of zero or more attributes.<br>An attribute is a key-value pair, such as <code>enable =&gt; fales</code>.</p>
<p>Puppet differentiates between two different attributes: parameters and properties.<br>Parameters describe the way that Puppet should deal with a resource type.<br>Properties describe a specific setting of a resource.<br>Certain parameters are available for all resource types (metaparameters), and some names are just very common, such as ensure. The service type supports the ensure property, which represents the status of the managed process. Its enabled property, on the other hand, relates to the system boot configuration (with respect to the service in question).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat puppet_service_provider.pp </span><br><span class="line">service &#123; &#39;puppet&#39;:</span><br><span class="line">  ensure   &#x3D;&gt; &#39;stopped&#39;,</span><br><span class="line">  enable   &#x3D;&gt; false,</span><br><span class="line">  provider &#x3D;&gt; &#39;upstart&#39;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The provider parameter tells Puppet that it need to interact with the upstart subsystem to control its background service.</p>
<p>The difference between parameters and properties is that the parameter merely indicates how Puppet should manage the resource, not what a desired state is.<br>Puppet will only take action on property values. In this example, these are ensure =&gt; ‘stopped’ and enable =&gt; false. For each such property, Puppet will perform the following tasks:</p>
<ul>
<li>Test whether the resources is already in sync with the target state</li>
<li>If the resource is not in sync, it will trigger a sync action</li>
</ul>
<p>Properties can be out of sync, whereas parameters cannot.</p>
<h2 id="Dry-testing-your-manifest"><a href="#Dry-testing-your-manifest" class="headerlink" title="Dry testing your manifest"></a>Dry testing your manifest</h2><p><code>puppet apply puppet_service.pp --noop</code></p>
<h2 id="Using-variables"><a href="#Using-variables" class="headerlink" title="Using variables"></a>Using variables</h2><p>Any variable name is always prefixed with the $ sign:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$download_server &#x3D; &#39;img2.example.net&#39;</span><br><span class="line">$url &#x3D; &quot;https:&#x2F;&#x2F;$&#123;download_server&#125;&#x2F;pkg&#x2F;example_source.tar.gz&quot; </span><br></pre></td></tr></table></figure>
<h2 id="Variable-types"><a href="#Variable-types" class="headerlink" title="Variable types"></a>Variable types</h2><p>Four variable types: strings, arrays, hashed, and Booleans</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$a_bool &#x3D; true</span><br><span class="line">$a_string &#x3D; &#39;This is a string value&#39;</span><br><span class="line">$an_array &#x3D; [ &#39;This&#39;, &#39;forms&#39;, &#39;an&#39;, &#39;array&#39; ]</span><br><span class="line">$a_hash &#x3D; &#123;   </span><br><span class="line">   &#39;subject&#39;   &#x3D;&gt; &#39;Hashes&#39;,  </span><br><span class="line">   &#39;predicate&#39; &#x3D;&gt; &#39;are written&#39;,  </span><br><span class="line">   &#39;object&#39;    &#x3D;&gt; &#39;like this&#39;,  </span><br><span class="line">   &#39;note&#39;      &#x3D;&gt; &#39;not actual grammar!&#39;,  </span><br><span class="line">   &#39;also note&#39; &#x3D;&gt; [ &#39;nesting is&#39;,</span><br><span class="line">   &#123; &#39;allowed&#39;   &#x3D;&gt; &#39; of course&#39; &#125; ], </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Data-types"><a href="#Data-types" class="headerlink" title="Data types"></a>Data types</h2><p>Puppet has core data types and abstract data types. The core data types are the most commonly used types of data, such as string or integer, whereas abstract data types allow for more sophisticated type validation, such as optional or variant.</p>
<h2 id="Adding-control-structures-in-manifests"><a href="#Adding-control-structures-in-manifests" class="headerlink" title="Adding control structures in manifests"></a>Adding control structures in manifests</h2><p>if/else block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if &#39;mail_lda&#39; in $needed_services &#123;  </span><br><span class="line">   service &#123; &#39;dovecot&#39;: enable &#x3D;&gt; true &#125;</span><br><span class="line">&#125; else &#123;  </span><br><span class="line">   service &#123; &#39;dovecot&#39;: enable &#x3D;&gt; false &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>case statement:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="How-to-add-a-new-module-in-puppet"><a href="#How-to-add-a-new-module-in-puppet" class="headerlink" title="How to add a new module in puppet"></a>How to add a new module in puppet</h1><h2 id="1-modified-Puppetfile"><a href="#1-modified-Puppetfile" class="headerlink" title="1. modified Puppetfile"></a>1. modified Puppetfile</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mod &#39;puppetlabs-lvm&#39;,  &#39;1.4.0&#39;</span><br></pre></td></tr></table></figure>

<h2 id="2-ssh-to-puppet-master"><a href="#2-ssh-to-puppet-master" class="headerlink" title="2. ssh to puppet master"></a>2. ssh to puppet master</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;etc&#x2F;puppetlabs&#x2F;code&#x2F;environments&#x2F;production&#x2F;</span><br><span class="line">librarian-puppeet install --verbose</span><br></pre></td></tr></table></figure>

<h2 id="3-modified-data-common-yaml-and-base-pp"><a href="#3-modified-data-common-yaml-and-base-pp" class="headerlink" title="3. modified data/common.yaml and base.pp"></a>3. modified data/common.yaml and base.pp</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">profile::base::enable_lvm: false</span><br><span class="line">vim base.pp</span><br><span class="line">if $enable_lvm &#123;</span><br><span class="line">   include lvm</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="4-new-file-data-node-overrides-hostname-yaml"><a href="#4-new-file-data-node-overrides-hostname-yaml" class="headerlink" title="4. new file data/node-overrides/hostname.yaml"></a>4. new file data/node-overrides/hostname.yaml</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">profile::base::enable_lvm: true</span><br><span class="line">lvm::volume_groups:</span><br><span class="line">  mysql_vg:</span><br><span class="line">    createonly: true</span><br><span class="line">    physical_volumes:</span><br><span class="line">      &#x2F;dev&#x2F;sdb:</span><br><span class="line">    logical_volumes:</span><br><span class="line">      ipscape_db:</span><br><span class="line">        size: undef </span><br><span class="line">        mountpath: &#x2F;dev&#x2F;mysql_vg&#x2F;ipscape_db</span><br><span class="line">        mountpath_require: true</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5-file-line"><a href="#5-file-line" class="headerlink" title="5. file_line"></a>5. file_line</h2><p><a target="_blank" rel="noopener" href="https://forge.puppet.com/modules/puppetlabs/stdlib/4.9.1/readme">file_line types</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">file_line &#123; &#39;asterisk_setting&#39;:</span><br><span class="line">  path &#x3D;&gt; &#39;&#x2F;etc&#x2F;ipscape-api&#x2F;server.settings&#39;,</span><br><span class="line">  line &#x3D;&gt; &#39;asterisk_pool_max_idle &#x3D; 0&#39;,</span><br><span class="line">  ensure &#x3D;&gt; present</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/devops/">devops</a><a href="/tags/puppet/">puppet</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/02/26/monitoring/" title="monitoring" itemprop="url">monitoring</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2020-02-26T10:52:07.000Z" itemprop="datePublished"> Published 2020-02-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Frontend-Monitoring"><a href="#Frontend-Monitoring" class="headerlink" title="Frontend Monitoring"></a>Frontend Monitoring</h1><h2 id="Two-approaches-to-frontend-monitoring"><a href="#Two-approaches-to-frontend-monitoring" class="headerlink" title="Two approaches to frontend monitoring"></a>Two approaches to frontend monitoring</h2><ul>
<li>real user monitoring (RUM)</li>
<li>synthetic<ul>
<li>tools: webpagetest.org</li>
</ul>
</li>
</ul>
<p><strong>Browsers expose page performance metrics visa the Navigation Timing API</strong></p>
<h1 id="Application-Monitoring"><a href="#Application-Monitoring" class="headerlink" title="Application Monitoring"></a>Application Monitoring</h1><p><strong>Application Performance Monitoring(APM) Tools</strong></p>
<ul>
<li>StatsD is a tool used to add metrics inside of your code.</li>
</ul>
<h1 id="Telegraf-InfluxDB-Grafana"><a href="#Telegraf-InfluxDB-Grafana" class="headerlink" title="Telegraf, InfluxDB + Grafana"></a>Telegraf, InfluxDB + Grafana</h1><ul>
<li><p>Grafana: Grafana is “The open platform for beautiful analytics and monitoring.” It makes it easy to create dashboards for displaying data from many sources, particularly time-series data. It works with several different data sources such as Graphite, Elasticsearch, InfluxDB, and OpenTSDB. We’re going to use this as our main front end for visualizing our network statistics.</p>
</li>
<li><p>InfluxDB: InfluxDB is “…a data store for any use case involving large amounts of timestamped data.” This is where we’re going to store our network statistics. It is designed for exactly this use-case, where metrics are collected over time.</p>
</li>
<li><p>Telegraf: Telegraf is “…a plugin-driven server agent for collecting and reporting metrics.” This can collect data from a wide variety of sources, e.g. system statistics, API calls, DB queries, and SNMP. It can then send those metrics to a variety of datastores, e.g. Graphite, OpenTSDB, Datadog, Librato. Telegraf is maintained by InfluxData, the people behind InfluxDB. So it has very good support for writing data to InfluxDB.</p>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/02/24/agile/" title="agile" itemprop="url">agile</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2020-02-24T09:39:06.000Z" itemprop="datePublished"> Published 2020-02-24</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Agile-is-a-movement"><a href="#Agile-is-a-movement" class="headerlink" title="Agile is a movement."></a>Agile is a movement.</h1><p>Movement: a group of people working together to advance their shared political, social, or artistic ideas.</p>
<h2 id="Early-agile-methodologies"><a href="#Early-agile-methodologies" class="headerlink" title="Early agile methodologies"></a>Early agile methodologies</h2><ul>
<li>1995: Scrum<ul>
<li>Iterative cycles of work</li>
<li>Emphasis on cross-functional collaboration</li>
</ul>
</li>
<li>Mid-90s: Crystal<ul>
<li>Emphasis on adaptability and “stretch-to-fit” process</li>
</ul>
</li>
<li>1990: XP<ul>
<li>Short, iterative cycles of work</li>
<li>Emphasis on collaboration between developers</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/MjJqXdR.jpg" alt="agile manifesto"><br><strong>Agile Values</strong></p>
<ul>
<li>Increase cross-functional collaboration</li>
<li>Minimize works in progress (sepecs, etc)</li>
<li>Work in iterative cycles to incorporate change and get frequent feedback</li>
<li>Make time to reflect on how you work</li>
</ul>
<hr>
<h1 id="Agile-Development"><a href="#Agile-Development" class="headerlink" title="Agile Development"></a>Agile Development</h1><p><strong>born-on-the-cloud model</strong>: cloud as the primary platform for both consumed and delivered services<br>Agility to get projects up and running quickly<br>streamlined process by reducing transitions from Development to Operations</p>
<p>Java EE application with a Minimum Viable Product (MVP)<br>setup the cloud infrastructure and Toolchain using the Born-on-the-cloud approach</p>
<p>Hypothesis-driven development</p>
<p>ranked backlog, user stories, story points<br>tracking and delivering in Timeboxed iterations</p>
<p><strong>backlog</strong> is a prioritized list of features (User Stores) waiting to be scheduled and implemented</p>
<p>Note that among other things one of the most important responsibilities of the product owner role in Agile development methodology is to keep the backlog ranked by priority, and he or she can set the priorities by simply dragging the issues and ordering them, regardless of when they were added to the backlog</p>
<p>User stories: who, what, why<br>story points and planning poker</p>
<p><strong>user story</strong> is an informal, natural language description of a chunk of functionality that is of value from an end-user perspective<br>As a <who>, I want <what> so that <why></p>
<p><strong>Story Points</strong> are estimates of effort as influenced by the amount of work, complexity, risk, and uncertainty.</p>
<ul>
<li>(Adapted) Fibonacci sequence: 0,1,2,3,5,8,13,20,40,100</li>
</ul>
<p><strong>Planning Poker</strong> is a consensus-based, gamified technique for estimating<br>Timeboxing refers to the act of putting strict time boundaries around an action for activity</p>
<p>time boxed interrogations along with story points are important to measure the team velocity over time. For example you should track the total amount of story points that team delivers each iteration, and this way you’ll be able to determine on average the team velocity metric, or in other words how many story points on average the team is able to deliver. </p>
<p>Architecture breakdown</p>
<ul>
<li>User interface (html/css/javascript)</li>
<li>CRUD Service(REST APIs with JAX-RS)</li>
<li>Database(NoSQL)</li>
</ul>
<p><strong>Test-Driven Development (TDD)</strong> is a technique for building software by writing automate test cases before writing any code<br>why: focus on the outcome; helps to manage risk; enables fast iterations and continous integration; keeps the code clear, simple and testable;<br>grater confidence to make applicaton changes; documentation of how the system works</p>
<p>How:add a test-&gt;run all tests and see if the new one fails-&gt; write the code-&gt;run tests-&gt; refactor the code-&gt;repeat</p>
<p>A <strong>delivery pipeline</strong> is a sequence of automated stages that retrieve input and run jobs, such as builds, tests, and deployments.<br>It automates the continuous deployment of a project, with miniumum or no-human intervention.</p>
<ul>
<li>A Stage retrieves input and run jobs, such as builds,tests, and deployments.</li>
<li>Jobs run in discrete working directories in containers that are created for each pipeline run</li>
<li>By default, stages run sequentially after changes are delivered to source control</li>
</ul>
<p><strong>showcase the applicaton</strong>: At the end of the iteration before the retrospective meeting that is a showcase meaning, also know as demo meeting, where the work done is demonstrated to the stakeholders and feedback is obtaining. The showcase meeting starts by reviewing what we have committed in the form of user stories. And finally we demonstrate what we have accomplished in the form of working software, so we can acquire feedback on the product we are building.</p>
<p><strong>retrospective meeting</strong>: how to conduct<br>1st way:<br>What went well?<br>what could be improved?</p>
<p>2nd way:<br>Start doing</p>
<ul>
<li>continuous delivery<br>stop doing</li>
<li>time-bxed iterations<br>continue doing</li>
<li>ranked backlog</li>
</ul>
<h2 id="Common-Problems"><a href="#Common-Problems" class="headerlink" title="Common Problems"></a>Common Problems</h2><h2 id="Value-Focus"><a href="#Value-Focus" class="headerlink" title="Value/Focus"></a>Value/Focus</h2><table>
<thead>
<tr>
<th>Problems</th>
<th>Solution</th>
</tr>
</thead>
<tbody><tr>
<td>Not understanding the market</td>
<td>Hypothesis-driven development</td>
</tr>
<tr>
<td>Putting wrong products into the market</td>
<td>Minimum Viable Product (MVP)</td>
</tr>
<tr>
<td>Lack of focus on value</td>
<td>Timboxing/Iterations</td>
</tr>
</tbody></table>
<h2 id="Productivity-Speed-Cost"><a href="#Productivity-Speed-Cost" class="headerlink" title="Productivity/Speed/Cost"></a>Productivity/Speed/Cost</h2><table>
<thead>
<tr>
<th>Problems</th>
<th>Solution</th>
</tr>
</thead>
<tbody><tr>
<td>Too long to get projects up and running</td>
<td>Born on the Cloud</td>
</tr>
<tr>
<td>Slow to put products into market</td>
<td>MVP/Delivery pipeline/Continuous delivery</td>
</tr>
<tr>
<td>Too costly projects</td>
<td>Automation/Toolchain/Delivery pipeline</td>
</tr>
</tbody></table>
<h2 id="Communication-Visibility"><a href="#Communication-Visibility" class="headerlink" title="Communication/Visibility"></a>Communication/Visibility</h2><table>
<thead>
<tr>
<th>Problems</th>
<th>Solution</th>
</tr>
</thead>
<tbody><tr>
<td>Priorities aren’t clear</td>
<td>Ranked backlog</td>
</tr>
<tr>
<td>Requirements not reflecting the user’s needs</td>
<td>User stories</td>
</tr>
<tr>
<td>Poor team communication</td>
<td>Daily standup</td>
</tr>
<tr>
<td>Lack of visibility into the progress</td>
<td>Iteration wall/Showcase meeting</td>
</tr>
</tbody></table>
<h2 id="Quality-Control"><a href="#Quality-Control" class="headerlink" title="Quality/Control"></a>Quality/Control</h2><table>
<thead>
<tr>
<th>Problems</th>
<th>Solution</th>
</tr>
</thead>
<tbody><tr>
<td>Low quality products</td>
<td>Test driven development/Delivery pipeline</td>
</tr>
<tr>
<td>Lack of prcess improvement</td>
<td>Retrospective meeting/Continous improvement</td>
</tr>
<tr>
<td>Bad Requirements estimations</td>
<td>Story points/Planning poker</td>
</tr>
<tr>
<td>Not honouring past our commitments</td>
<td>Track team’s velocity</td>
</tr>
</tbody></table>
<h2 id="Scrum-Sprints"><a href="#Scrum-Sprints" class="headerlink" title="Scrum Sprints"></a>Scrum Sprints</h2><ul>
<li>Sprint goal is the high-level goal of each time-boxed sprint written as concisely as possible</li>
<li>The development team then plans how to convert the goal times into a product increment</li>
<li>The sprint backlog is a subset of the product backlog and contains items selected for the sprint, plus additional iteams for<br>the development team</li>
</ul>
<h2 id="The-scrum-pillars-TIA"><a href="#The-scrum-pillars-TIA" class="headerlink" title="The scrum pillars (TIA)"></a>The scrum pillars (TIA)</h2><ul>
<li>Transparency</li>
<li>Inspcection</li>
<li>Adaptation<h2 id="Scrum-roles-Product-Owner"><a href="#Scrum-roles-Product-Owner" class="headerlink" title="Scrum roles: Product Owner"></a>Scrum roles: Product Owner</h2></li>
<li>Anyone on Scrum team may change the product backlog, but must do it with product owner’s knowledge</li>
<li>Product owner is accountable for the product backlog<h2 id="Scrum-roles-The-development-team"><a href="#Scrum-roles-The-development-team" class="headerlink" title="Scrum roles: The development team"></a>Scrum roles: The development team</h2></li>
<li>The development team is self-organized and operates with minimal input from external sources</li>
<li>The development team owns the entire sprint backlog(selected product backlog iteams, plus development tasks)</li>
<li>The are no managers or team leads-it is a flat hierarchy</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/devops/">devops</a><a href="/tags/agile/">agile</a><a href="/tags/software-development/">software development</a><a href="/tags/agile-development/">agile development</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/02/24/photography/" title="photography" itemprop="url">photography</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2020-02-24T09:39:06.000Z" itemprop="datePublished"> Published 2020-02-24</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><strong>Exposure</strong>: Aperture, ISO speed, and shutter speed are the three core controls that manipulate exposure. </p>
<p><strong>Camera metering</strong>: The engine that assesses light and exposure. </p>
<p><strong>Depth of field</strong>: An important characteristic that influences our perception of space.</p>
<h2 id="Understanding-exposure"><a href="#Understanding-exposure" class="headerlink" title="Understanding exposure"></a>Understanding exposure</h2><h3 id="Exposure-triangle"><a href="#Exposure-triangle" class="headerlink" title="Exposure triangle"></a>Exposure triangle</h3><p><img src="https://i.imgur.com/qViBe1j.jpg" alt="the exposure triangle"><br><strong>Shutter speed</strong>: Controls the duration of the exposure</p>
<p>The shutter spped, or exposure time, refers to how long this light is permitted to enter the camera.</p>
<p>Range of Shutter Speeds<br>SHUTTER SPEED|TYPICAL EXAMPLE<br>—|—<br>1 to 30+ seconds|To take specialty night and low-light photos on a tripod<br>1/2 to 2 seconds|To add a silky look to flowing water landscape photos on a tripod for enhanced depth of field<br>1/30 to 1/2 second|To add motion blur to the background of moving-subject, carefully taken, handheld photos with stabilization<br>1/250 to 1/50 second|To take typical handheld photos without substantial zoom<br>1/500 to 1/250 second|To freeze everyday sports/action, in moving-subject, handheld photos with substantial zoom (telephoto lens)<br>1/8000 to 1/1000 second|To freeze extremely fast, up-close subject motion</p>
<p><em>Note that the range in shutter speeds spans a 100,000× ratio between the shortest exposure and longest exposure, enabling cameras with this capability to record a wide variety of subject motion.</em></p>
<p><strong>Aperture</strong>: Controls the area through which light can enter your camera<br>A camera’s aperture setting controls the width of the opening that lets light into your camera lens.<br>We measure a camera’s aperture using an f-stop value, which can be counterintuitive because the area of the opening increases as the f-stop decreases. For example, when photographers say they’re “stopping down” or “opening up” their lens, they’re referring to increasing and decreasing the f-stop value, respectively<br><img src="https://i.imgur.com/BSiRQZX.jpg" alt="F-stop values and the corresponding aperture area"></p>
<p><strong>ISO speed</strong>: Controls the sensitivity of your camera’s sensor to a given amount of light</p>
<p><img src="https://i.imgur.com/5R1Mq0c.png" alt="Typical Focal Lengths and Their Uses"></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/photography/">photography</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/02/09/SRE/" title="SRE" itemprop="url">SRE</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2020-02-09T01:10:52.000Z" itemprop="datePublished"> Published 2020-02-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Implementing-SLOs"><a href="#Implementing-SLOs" class="headerlink" title="Implementing SLOs"></a>Implementing SLOs</h1><p>Service level objectives (SLOs) specify a target level for the reliability of your service.<br>SLOs are key to making data-driven decisions about reliability, they’re at the core of SRE practices.</p>
<p>SLOs are a tool to help determin what engineering work to prioritize.</p>
<h1 id="Effective-team-incident-reports"><a href="#Effective-team-incident-reports" class="headerlink" title="Effective team incident reports"></a>Effective team incident reports</h1><p>It’s essential to have a team incident report per incident. These artifacts are for the team to help to spread knowledge and prevent stagnation where the team as a whole doesn’t know specific knowledge obtained via the incident. Store these artifacts in a central place. Depending on the organization, these artifacts may be useful to other teams.</p>
<p>Each artifact may have slightly different content based on the nature of the incident. The reader of the team incident report is the individuals on the team, so these reports can be longer and more detailed than external or executive briefings.</p>
<p>An example template for a team incident report:</p>
<ul>
<li>Title</li>
<li>Date</li>
<li>Author(s)</li>
<li>Summary of the incident</li>
<li>Incident participants and their role(s)</li>
<li>Impact</li>
<li>Timeline</li>
<li>Include graphs and logs that help support the facts described in the timeline.</li>
<li>Lessons learned about what went well, and what needs improvement.</li>
<li>Action Items - These should include who, what, type of action, and when. Others outside of the incident response team might think of additional action items after reviewing the narrative.</li>
</ul>
<p>While one person should have the responsibility of being the note taker during the meeting and initial author of the report, everyone on the incident response team should review and update the team report.</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/SRE/">SRE</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/09/20/anatomy-of-containers/" title="anatomy of containers" itemprop="url">anatomy of containers</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2019-09-20T00:05:28.000Z" itemprop="datePublished"> Published 2019-09-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Anatomy-of-containers"><a href="#Anatomy-of-containers" class="headerlink" title="Anatomy of containers"></a>Anatomy of containers</h1><p>Containers are specially encapsulated and secured processes running on the host system.</p>
<p>Containers leverage a lot of features and primitives available in the Linux OS. The most important ones are</p>
<ul>
<li>namespaces</li>
<li>cgroups</li>
</ul>
<p>All processes running in containers share the same Linux kernel of the underlying host operating system. This is fundamentally different compared with VMs, as each VM contains its own full-blown operating system.</p>
<p>Difference:</p>
<table>
<thead>
<tr>
<th></th>
<th>Container</th>
<th>VMs</th>
</tr>
</thead>
<tbody><tr>
<td>startup times</td>
<td>milliseconds</td>
<td>several seconds</td>
</tr>
<tr>
<td>goal</td>
<td>ephemeral</td>
<td>long-living</td>
</tr>
</tbody></table>
<p><img src="https://i.imgur.com/3ReVPcO.png" alt="high level architecture of Docker"><br>On the lower part of the the preceding figure, we have the Linux operating system with its cgroups, namespaces, and layer capabilities as well as other functionality that we do not need to explicitly mention here. Then, there is an intermediary layer composed of <strong>containerd</strong> and <strong>runc</strong>. On top of all that now sits the Docker engine. The Docker engine offers a RESTful interface to the outside world that can be accessed by any tool, such as the Docker CLI, Docker for Mac, and Docker for Windows or Kubernetes to just name a few.</p>
<h2 id="Namespaces"><a href="#Namespaces" class="headerlink" title="Namespaces"></a>Namespaces</h2><p>A namespace is an abstraction of global resources such as filesystems, network access, process tree (also named PID namespace) or the system group IDs, and user IDs.<br><img src="https://i.imgur.com/GVSkK6z.png" alt="virtual FS"><br>The PID namespace is what keeps processes in one container from seeing or interacting with processes in another container. A process might have the apparent PID 1 inside a container, but if we examine it from the host system, it would have an ordinary PID, say 334:<br><img src="https://i.imgur.com/zhefA3P.png" alt="Process tree on a Docker host"></p>
<h2 id="Control-groups-cgroups"><a href="#Control-groups-cgroups" class="headerlink" title="Control groups (cgroups)"></a>Control groups (cgroups)</h2><p>Linux cgroups are used to limit, manage, and isolate resource usage of collections of processes running on a system.<br>Resources are CPU time, system memory, network bandwidth, or combinations of there resources, and so on.</p>
<p>Using cgroups, admins can limit the resources that containers can consume.With this, one can avoid, for example, the classical noisy neighbor problem, where a rogue process running in a container consumes all CPU time or reserves massive amounts of RAM and, as such, starves all the other processes running on the host, whether they’re containerized or not.</p>
<h2 id="Union-filesystem-UnionFS"><a href="#Union-filesystem-UnionFS" class="headerlink" title="Union filesystem (UnionFS)"></a>Union filesystem (UnionFS)</h2><p>The UnionFS forms the backbone of what is known as container images.<br>UnionFS is mainly used on Linux and allows files and directories of distinct filesystems to be overlaid and with it form a single coherent file system.In this context, the individual filesystems are called branches. Contents of directories that have the same path within the merged branches will be seen together in a single merged directory, within the new, virtual filesystem. When merging branches, the priority between the branches is specified. In that way, when two branches contain the same file, the one with the higher priority is seen in the final FS.</p>
<h2 id="Container-plumbing"><a href="#Container-plumbing" class="headerlink" title="Container plumbing"></a>Container plumbing</h2><p>The basement on top of which the Docker engine is built; we can also call it the container plumbing and is formed by the two component—runc and containerd.</p>
<h2 id="Runc"><a href="#Runc" class="headerlink" title="Runc"></a>Runc</h2><p>Runc is a lightweight, portable container runtime. It provides full support for Linux namespaces as well as native support for all security features available on Linux, such as SELinux, AppArmor, seccomp, and cgroups.</p>
<p>Runc is a tool for spawning and running containers according to the Open Container Initiative (OCI) specification.</p>
<h2 id="Containerd"><a href="#Containerd" class="headerlink" title="Containerd"></a>Containerd</h2><p>Runc is a low-level implementation of a container runtime; containerd builds on top of it, and adds higher-level features, such as image transfer and storage, container execution, and supervision, as well as network and storage attachments.</p>
<h1 id="Creating-and-managing-container-images"><a href="#Creating-and-managing-container-images" class="headerlink" title="Creating and managing container images"></a>Creating and managing container images</h1><h2 id="The-layered-filesystem"><a href="#The-layered-filesystem" class="headerlink" title="The layered filesystem"></a>The layered filesystem</h2><p><img src="https://i.imgur.com/Np4zxp1.jpg" alt="stack of layers"><br>The layers of a container image are all immutable. Immutable means that once generated, the layer cannot ever be changed. The only possible operation affecting the layer is the physical deletion of it.<br><img src="https://i.imgur.com/CkLp7N6.jpg" alt="A sample custom image based on Alpine and Nginx"><br>Each layer only contains the delta of changes in regard to the previous set of layers. The content of each layer is mapped to a special folder on the host system, which is usually a subfolder of /var/lib/docker/.</p>
<p>Since layers are immutable, they can be cached without ever becoming stale. This is a big advantage.</p>
<h2 id="The-writable-container-layer"><a href="#The-writable-container-layer" class="headerlink" title="The writable container layer"></a>The writable container layer</h2><p><img src="https://i.imgur.com/Gio85pZ.jpg" alt="the writable container layer"><br><img src="https://i.imgur.com/E80YSMK.jpg" alt="Multiple containers sharing the same image layers"><br>The container layer is marked as read/write. Another advantage of the immutability of image layers is that they can be shared among many containers created from this image. All that is needed is a thin, writable container layer for each container.</p>
<p>This technique, of course, results in a tremendous reduction of resources that are consumed. Furthermore, this helps to decrease the loading time of a container since only a thin container layer has to be created once the image layers have been loaded into memory, which only happens for the first container.</p>
<h2 id="Copy-on-write"><a href="#Copy-on-write" class="headerlink" title="Copy-on-write"></a>Copy-on-write</h2><p>Docker uses the copy-on-write technique when dealing with images. Copy-on-write is a strategy of sharing and copying files for maximum efficiency. If a layer uses a file or folder that is available in one of the low-lying layers, then it just uses it. If, on the other hand, a layer wants to modify, say, a file from a low-lying layer, then it first copies this file up to the target layer and then modifies it.<br><img src="https://i.imgur.com/hTj3sG0.jpg" alt="copy-on-write"><br>The second layer wants to modify <strong>File 2</strong>, which is present in the base layer. Thus, it copied it up and then modified it. Now, let’s say that we’re sitting in the top layer of the preceding figure. This layer will use <strong>File 1</strong> from the base layer and <strong>File 2</strong> and <strong>File 3</strong> from the second layer.</p>
<h2 id="Creating-images"><a href="#Creating-images" class="headerlink" title="Creating images"></a>Creating images</h2><p>Three ways to create a new container image on your system.</p>
<ol>
<li>Interactive image creation<br>start with a base image that we want to use as a template and run a container of it interactively. <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">$ docker container run -it --name sample alpine &#x2F;bin&#x2F;sh</span><br><span class="line"></span><br><span class="line">#By default, the alpine container does not have the ping tool installed. Let&#39;s assume we want to create a new custom image that has ping installed. </span><br><span class="line"></span><br><span class="line"># apk update &amp;&amp; apk add iputils</span><br><span class="line"> # ping 127.0.0.1</span><br><span class="line">PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from 127.0.0.1: icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;0.060 ms</span><br><span class="line">64 bytes from 127.0.0.1: icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;0.054 ms</span><br><span class="line">64 bytes from 127.0.0.1: icmp_seq&#x3D;3 ttl&#x3D;64 time&#x3D;0.059 ms</span><br><span class="line">^C</span><br><span class="line">$ docker container ls -a | grep sample</span><br><span class="line">#If we want to see what has changed in our container in relation to the base image</span><br><span class="line">$ docker container diff sample</span><br><span class="line">C &#x2F;var</span><br><span class="line">C &#x2F;var&#x2F;cache</span><br><span class="line">C &#x2F;var&#x2F;cache&#x2F;apk</span><br><span class="line">A &#x2F;var&#x2F;cache&#x2F;apk&#x2F;APKINDEX.00740ba1.tar.gz</span><br><span class="line">A &#x2F;var&#x2F;cache&#x2F;apk&#x2F;APKINDEX.d8b2a6f4.tar.gz</span><br><span class="line">C &#x2F;bin</span><br><span class="line">C &#x2F;bin&#x2F;ping</span><br><span class="line">C &#x2F;bin&#x2F;ping6</span><br><span class="line">A &#x2F;bin&#x2F;traceroute6</span><br><span class="line">C &#x2F;lib</span><br><span class="line">C &#x2F;lib&#x2F;apk</span><br><span class="line">C &#x2F;lib&#x2F;apk&#x2F;db</span><br><span class="line">C &#x2F;lib&#x2F;apk&#x2F;db&#x2F;triggers</span><br><span class="line">C &#x2F;lib&#x2F;apk&#x2F;db&#x2F;installed</span><br><span class="line">C &#x2F;lib&#x2F;apk&#x2F;db&#x2F;scripts.tar</span><br><span class="line">C &#x2F;usr</span><br><span class="line">C &#x2F;usr&#x2F;sbin</span><br><span class="line">C &#x2F;usr&#x2F;sbin&#x2F;arping</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;clockdiff</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;rarpd</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;setcap</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;tracepath</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;tracepath6</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;ninfod</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;getcap</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;tftpd</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;getpcaps</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;ipg</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;rdisc</span><br><span class="line">A &#x2F;usr&#x2F;sbin&#x2F;capsh</span><br><span class="line">C &#x2F;usr&#x2F;lib</span><br><span class="line">A &#x2F;usr&#x2F;lib&#x2F;libcap.so.2</span><br><span class="line">A &#x2F;usr&#x2F;lib&#x2F;libcap.so.2.27</span><br><span class="line">C &#x2F;etc</span><br><span class="line">C &#x2F;etc&#x2F;apk</span><br><span class="line">C &#x2F;etc&#x2F;apk&#x2F;world</span><br><span class="line">C &#x2F;root</span><br><span class="line">A &#x2F;root&#x2F;.ash_history</span><br><span class="line"></span><br><span class="line">#In the preceding list, A stands for added, and C for changed. If we had any deleted files, then those would be prefixed with D.</span><br><span class="line">#use the docker container commit command to persist our modifications and create a new image from them:</span><br><span class="line">$ docker container commit sample my-alpine</span><br><span class="line">sha256:31da02222ee7102dd755692bd498c6b170f11ffeb81ca700a4d12c0e5de9b913</span><br><span class="line"></span><br><span class="line">## If we want to see how our custom image has been built</span><br><span class="line">$ docker image history my-alpine</span><br><span class="line">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span><br><span class="line">31da02222ee7        38 seconds ago      &#x2F;bin&#x2F;sh                                         1.76MB</span><br><span class="line">961769676411        4 weeks ago         &#x2F;bin&#x2F;sh -c #(nop)  CMD [&quot;&#x2F;bin&#x2F;sh&quot;]              0B</span><br><span class="line">&lt;missing&gt;           4 weeks ago         &#x2F;bin&#x2F;sh -c #(nop) ADD file:fe64057fbb83dccb9…   5.58MB</span><br><span class="line">#The first layer in the preceding list is the one that we just created by adding the iputils package.</span><br></pre></td></tr></table></figure></li>
<li>Using Dockerfiles<br>The Dockerfile is a text file that is usually literally called Dockerfile. It contains instructions on how to build a custom container image. It is a declarative way of building images.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM python:2.7</span><br><span class="line">RUN mkdir -p &#x2F;app</span><br><span class="line">WORKDIR &#x2F;app</span><br><span class="line">COPY .&#x2F;requirements.txt &#x2F;app&#x2F;</span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line">CMD [&quot;python&quot;, &quot;main.py&quot;]</span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/NMD2UG5.jpg" alt="the relation of Dockerfile and layers in an image"></li>
</ol>
<p><strong>The FROM keyword</strong><br>Every DOckerfile starts with the FROM keyword. With it, we define which base image we want to start building our custom image from. If build starting with CentOS 7:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FROM centos:7</span><br></pre></td></tr></table></figure>

<p>If we really want to start from scratch:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FROM scratch</span><br></pre></td></tr></table></figure>
<p>FROM scratch is a no-op in the Dockerfile, and as such does not generate a layer in the resulting container image.</p>
<p><strong>The RUN keyword</strong><br>The argument for RUN is any valid Linux command, such as the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN yum install -y wget</span><br></pre></td></tr></table></figure>
<p>If we use more than one line, we need to put a backslash () at the end of the lines to indicate to the shell that the command continues on the next line.<br><strong>The COPY and ADD keywords</strong><br>add some content to an existing base image to make it a custom image. Most of the time, these are a few source files of, say, a web application or a few binaries of a compiled application.</p>
<p>These two keywords are used to copy files and folders from the host into the image that we’re building. The two keywords are very similar, with the exception that the ADD keyword also lets us copy and unpack TAR files, as well as provide a URL as a source for the files and folders to copy.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">COPY . &#x2F;app</span><br><span class="line">COPY .&#x2F;web &#x2F;app&#x2F;web</span><br><span class="line">COPY sample.txt &#x2F;data&#x2F;my-sample.txt</span><br><span class="line">ADD sample.tar &#x2F;app&#x2F;bin&#x2F;</span><br><span class="line">ADD http:&#x2F;&#x2F;example.com&#x2F;sample.txt &#x2F;data&#x2F;</span><br></pre></td></tr></table></figure>
<p>In the preceding lines of code:</p>
<ul>
<li>The first line copies all files and folders from the current directory recursively to the /app folder inside the container image</li>
<li>The second line copies everything in the web subfolder to the target folder, /app/web</li>
<li>The third line copies a single file, sample.txt, into the target folder, /data, and at the same time, renames it to my-sample.txt</li>
<li>The fourth statement unpacks the sample.tar file into the target folder, /app/bin</li>
<li>Finally, the last statement copies the remote file, sample.txt, into the target file, /data</li>
</ul>
<p>Wildcards are allowed in the source path. For example, the following statement copies all files starting with sample to the mydir folder inside the image:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COPY .&#x2F;sample* &#x2F;mydir&#x2F;</span><br></pre></td></tr></table></figure>

<p>From a security perspective, it is important to know that by default, all files and folders inside the image will have a user ID (UID) and a group ID (GID) of 0. The good thing is that for both ADD and COPY, we can change the ownership that the files will have inside the image using the optional –chown flag, as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADD --chown&#x3D;11:22 .&#x2F;data&#x2F;files* &#x2F;app&#x2F;data&#x2F;</span><br></pre></td></tr></table></figure>
<p>The preceding statement will copy all files starting with the name web and put them into the /app/data folder in the image, and at the same time assign user 11 and group 22 to these files.</p>
<p>Instead of numbers, one could also use names for the user and group, but then these entities would have to be already defined in the root filesystem of the image at /etc/passwd and /etc/group respectively, otherwise the build of the image would fail.</p>
<p><strong>The WORKDIR keyword</strong><br>The WORKDIR keyword defines the working directory or context that is used when a container is run from our custom image. So, if I want to set the context to the /app/bin folder inside the image, my expression in the Dockerfile would have to look as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WORKDIR &#x2F;app&#x2F;bin</span><br></pre></td></tr></table></figure>
<p>All activity that happens inside the image after the preceding line will use this directory as the working directory. It is very important to note that the following two snippets from a Dockerfile are not the same:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RUN cd &#x2F;app&#x2F;bin</span><br><span class="line">RUN touch sample.txt</span><br></pre></td></tr></table></figure>
<p>Compare the preceding code with the following code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WORKDIR &#x2F;app&#x2F;bin</span><br><span class="line">RUN touch sample.txt</span><br></pre></td></tr></table></figure>
<p>The former will create the file in the root of the image filesystem, while the latter will create the file at the expected location in the /app/bin folder. Only the WORKDIR keyword sets the context across the layers of the image. The cd command alone is not persisted across layers.</p>
<p><strong>The CMD and ENTRYPOINT keywords</strong><br>While all other keywords defined for a Dockerfile are executed at the time the image is built by the Docker builder, these two are actually definitions of what will happen when a container is started from the image we define. When the container runtime starts a container, it needs to know what the process or application will be that has to run inside this container. That is exactly what CMD and ENTRYPOINT are used for—to tell Docker what the start process is and how to start that process.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ping 8.8.8.8 -c 3</span><br></pre></td></tr></table></figure>
<p>ping is the command and 8.8.8.8 -c 3 are the parameters to this command.</p>
<p>ENTRYPOINT is used to define the command of the expression while CMD is used to define the parameters for the command. Thus, a Dockerfile using alpine as the base image and defining ping as the process to run in the container could look as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM alpine:latest</span><br><span class="line">ENTRYPOINT [&quot;ping&quot;]</span><br><span class="line">CMD [&quot;8.8.8.8&quot;, &quot;-c&quot;, &quot;3&quot;]</span><br></pre></td></tr></table></figure>
<p>For both ENTRYPOINT and CMD, the values are formatted as a JSON array of strings, where the individual items correspond to the tokens of the expression that are separated by whitespace. This the preferred way of defining CMD and ENTRYPOINT. It is also called the exec form.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ docker image build -t pinger .</span><br><span class="line">$ docker container run --rm -it pinger</span><br><span class="line">PING 8.8.8.8 (8.8.8.8): 56 data bytes</span><br><span class="line">64 bytes from 8.8.8.8: seq&#x3D;0 ttl&#x3D;56 time&#x3D;5.612 ms</span><br><span class="line">64 bytes from 8.8.8.8: seq&#x3D;1 ttl&#x3D;56 time&#x3D;4.389 ms</span><br><span class="line">64 bytes from 8.8.8.8: seq&#x3D;2 ttl&#x3D;56 time&#x3D;6.592 ms</span><br><span class="line">#The beauty of this is that I can now override the CMD part that I have defined in the Dockerfile</span><br><span class="line">#This will now cause the container to ping the loopback for 5 seconds.</span><br><span class="line"></span><br><span class="line">$ docker container run --rm -it pinger -w 5 127.0.0.1</span><br><span class="line">PING 127.0.0.1 (127.0.0.1): 56 data bytes</span><br><span class="line">64 bytes from 127.0.0.1: seq&#x3D;0 ttl&#x3D;64 time&#x3D;0.077 ms</span><br><span class="line">64 bytes from 127.0.0.1: seq&#x3D;1 ttl&#x3D;64 time&#x3D;0.087 ms</span><br><span class="line">64 bytes from 127.0.0.1: seq&#x3D;2 ttl&#x3D;64 time&#x3D;0.090 ms</span><br><span class="line">64 bytes from 127.0.0.1: seq&#x3D;3 ttl&#x3D;64 time&#x3D;0.082 ms</span><br><span class="line">64 bytes from 127.0.0.1: seq&#x3D;4 ttl&#x3D;64 time&#x3D;0.081 ms</span><br><span class="line"></span><br><span class="line">#If we want to override what&#39;s defined in the ENTRYPOINT in the Dockerfile, we need to use the --entrypoint parameter in the docker container run expression.</span><br><span class="line">docker container run --rm -it --entrypoint &#x2F;bin&#x2F;sh pinger</span><br><span class="line">&#x2F; # exit</span><br><span class="line"></span><br><span class="line">FROM alpine:latest</span><br><span class="line">CMD wget -O - http:&#x2F;&#x2F;www.google.com</span><br><span class="line"></span><br><span class="line">## If you leave ENTRYPOINT undefined, then it will have the default value of &#x2F;bin&#x2F;sh -c, and whatever is the value of CMD will be passed as a string to the shell command. The preceding definition would thereby result in entering following process to run inside the container:</span><br><span class="line">&#x2F;bin&#x2F;sh -c &quot;wget -O - http:&#x2F;&#x2F;www.google.com&quot;</span><br><span class="line"></span><br><span class="line">Consequently, &#x2F;bin&#x2F;sh is the main process running inside the container, and it will start a new child process to run the wget utility.</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/98sfbpv.jpg" alt="the image build process visualized"></p>
<h2 id="Multistep-builds"><a href="#Multistep-builds" class="headerlink" title="Multistep builds"></a>Multistep builds</h2><p>With a size of 176 MB, the resulting image is way too big. In the end, it is just a Hello World application. The reason for it being so big is that the image not only contains the Hello World binary, but also all the tools to compile and link the application from the source code. But this is really not desirable when running the application, say, in production. Ideally, we only want to have the resulting binary in the image and not a whole SDK.</p>
<p>It is precisely for this reason that we should define Dockerfiles as multistage. We have some stages that are used to build the final artifacts and then a final stage where we use the minimal necessary base image and copy the artifacts into it. This results in very small images. Have a look at this revised Dockerfile:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FROM alpine:3.7 AS build</span><br><span class="line">RUN apk update &amp;&amp; apk add --update alpine-sdk</span><br><span class="line">RUN mkdir &#x2F;app</span><br><span class="line">WORKDIR &#x2F;app</span><br><span class="line">COPY . &#x2F;app</span><br><span class="line">RUN mkdir bin</span><br><span class="line">RUN gcc hello.c -o bin&#x2F;hello</span><br><span class="line"></span><br><span class="line">FROM alpine:3.7</span><br><span class="line">COPY --from&#x3D;build &#x2F;app&#x2F;bin&#x2F;hello &#x2F;app&#x2F;hello</span><br><span class="line">CMD &#x2F;app&#x2F;hello</span><br></pre></td></tr></table></figure>
<p>Here, we have a first stage with an alias build that is used to compile the application, and then the second stage uses the same base image alpine:3.7, but does not install the SDK, and only copies the binary from the build stage, using the –from parameter, into this final image.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker image ls |grep hello-world</span><br><span class="line">hello-world-small                                              latest                                     46bb8c275fda        About a minute ago   4.22MB</span><br><span class="line">hello-world                                                    latest                                     75339d9c269f        7 minutes ago        178MB</span><br></pre></td></tr></table></figure>
<p>We have been able to reduce the size from 178 MB down to 4 MB. This is reduction in size by a factor of 40. A smaller image size has many advantages, such as a smaller attack surface area for hackers, reduced memory and disk consumption, faster startup times of the corresponding containers, and a reduction of the bandwidth needed to download the image from a registry, such as Docker Hub.</p>
<h2 id="Dockerfile-best-practices"><a href="#Dockerfile-best-practices" class="headerlink" title="Dockerfile best practices"></a>Dockerfile best practices</h2><ul>
<li>First and foremost, we need to consider that containers are meant to be ephemeral. By ephemeral, we mean that a container can be stopped and destroyed and a new one built and put in place with an absolute minimum of setup and configuration. That means that we should try hard to keep the time that is needed to initialize the application running inside the container at a minimum, as well as the time needed to terminate or clean up the application.</li>
<li>we should order the individual commands in the Dockerfile so that we leverage caching as much as possible. Building a layer of an image can take a considerable amount of time, sometimes many seconds or even minutes. While developing an application, we will have to build the container image for our application multiple times. We want to keep the build times at a minimum.</li>
</ul>
<blockquote>
<p>When we’re rebuilding a previously built image, the only layers that are rebuilt are the ones that have changed, but if one layer needs to be rebuilt, all subsequent layers also need to be rebuilt. This is very important to remember. Consider the following example:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM node:9.4</span><br><span class="line">RUN mkdir -p &#x2F;app</span><br><span class="line">WORKDIR &#x2F;app</span><br><span class="line">COPY . &#x2F;app</span><br><span class="line">RUN npm install</span><br><span class="line">CMD [&quot;npm&quot;, &quot;start&quot;]</span><br></pre></td></tr></table></figure>
<p>In this example, the npm install command on line five of the Dockerfile usually takes the longest. A classical Node.js application has many external dependencies, and those are all downloaded and installed in this step. This can take minutes until it is done. Therefore, we want to avoid running npm install each time we rebuild the image, but a developer changes their source code all the time during development of the application. That means that line four, the result of the COPY command, changes all the time and this layer has to be rebuilt each time. But as we discussed previously, that also means that all subsequent layers have to be rebuilt, which in this case includes the npm install command. To avoid this, we can slightly modify the Dockerfile and have the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FROM node:9.4</span><br><span class="line">RUN mkdir -p &#x2F;app</span><br><span class="line">WORKDIR &#x2F;app</span><br><span class="line">COPY package.json &#x2F;app&#x2F;</span><br><span class="line">RUN npm install</span><br><span class="line">COPY . &#x2F;app</span><br><span class="line">CMD [&quot;npm&quot;, &quot;start&quot;]</span><br></pre></td></tr></table></figure>
<p>What we have done here is that, on line four, we only copy the single file that the npm install command needs as a source, which is the package.json file. This file rarely changes in a typical development process. As a consequence, the npm install command also has to be executed only when the package.json file changes. All the remaining, frequently changed content is added to the image after the npm install command.</p>
<ul>
<li>A further best practice is to keep the number of layers that make up your image relatively small. The more layers an image has, the more the graph driver needs to work to consolidate the layers into a single root filesystem for the corresponding container. Of course, this takes time, and thus the fewer layers an image has, the faster the startup time for the container can be.<blockquote>
<p>The easiest way to reduce the number of layers is to combine multiple individual RUN commands into a single one—for example, say that we had the following in a Dockerfile:</p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUN apt-get update</span><br><span class="line">RUN apt-get install -y ca-certificates</span><br><span class="line">RUN rm -rf &#x2F;var&#x2F;lib&#x2F;apt&#x2F;lists&#x2F;*</span><br></pre></td></tr></table></figure>
<p>We could combine these into a single concatenated expression, as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUN apt-get update \</span><br><span class="line">   &amp;&amp; apt-get install -y ca-certificates \</span><br><span class="line">   &amp;&amp; rm -rf &#x2F;var&#x2F;lib&#x2F;apt&#x2F;lists&#x2F;*</span><br></pre></td></tr></table></figure>
<p>The former will generate three layers in the resulting image, while the latter only creates a single layer.</p>
<p>The next three best practices all result in smaller images. Why is this important? Smaller images reduce the time and bandwidth needed to download the image from a registry. They also reduce the amount of disk space needed to store a copy locally on the Docker host and the memory needed to load the image. Finally, smaller images also means a smaller attack surface for hackers. Here are the best practices mentioned:</p>
<ol>
<li><p>The first best practice that helps to reduce the image size is to use a .dockerignore file. We want to avoid copying unnecessary files and folders into an image to keep it as lean as possible. A .dockerignore file works in exactly the same way as a .gitignore file, for those who are familiar with Git. In a .dockerignore file, we can configure patterns to exclude certain files or folders from being included in the context when building the image.</p>
</li>
<li><p>The next best practice is to avoid installing unnecessary packages into the filesystem of the image. Once again, this is to keep the image as lean as possible.</p>
</li>
<li><p>Last but not least, it is recommended that you use multistage builds so that the resulting image is as small as possible and only contains the absolute minimum needed to run your application or application service. </p>
</li>
</ol>
<h1 id="3-Saving-and-loading-images"><a href="#3-Saving-and-loading-images" class="headerlink" title="3. Saving and loading images"></a>3. Saving and loading images</h1><p>The third way to create a new container image is by importing or loading it from a file. A container image is nothing more than a tarball. To demonstrate this, we can use the docker image save command to export an existing image to a tarball:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker image save -o .&#x2F;backup&#x2F;my-alpine.tar my-alpine</span><br><span class="line">$ docker image load -i .&#x2F;backup&#x2F;my-alpine.tar</span><br></pre></td></tr></table></figure>
<h1 id="Running-in-production"><a href="#Running-in-production" class="headerlink" title="Running in production"></a>Running in production</h1><p><strong>Blue-green deployments</strong><br>In blue-green deployments, the current version of the application service, called blue, handles all the application traffic. We then install the new version of the application service, called green, on the production system. The new service is not yet wired with the rest of the application.</p>
<p>Once green is installed, one can execute smoke tests against this new service and, if those succeed, the router can be configured to funnel all traffic that previously went to blue to the new service, green. The behavior of green is then observed closely and, if all success criteria are met, blue can be decommissioned. But if, for some reason, green shows some unexpected or unwanted behavior, the router can be reconfigured to return all traffic to blue. Green can then be removed and fixed, and a new blue-green deployment can be executed with the corrected version:<br><img src="https://i.imgur.com/bWC8uLg.png" alt="blue-green deployment"></p>
<p><strong>Canary releases</strong><br>Canary releases are releases where we have the current version of the application service and the new version installed on the system in parallel. As such, they resemble blue-green deployments. At first, all traffic is still routed through the current version. We then configure a router so that it funnels a small percentage, say 1%, of the overall traffic to the new version of the application service. The behavior of the new service is then monitored closely to find out whether or not it works as expected. If all the criteria for success are met, then the router is configured to funnel more traffic, say 5% this time, through the new service. Again, the behavior of the new service is closely monitored and, if it is successful, more and more traffic is routed to it until we reach 100%. Once all traffic is routed to the new service and it has been stable for some time, the old version of the service can be decommissioned.</p>
<h1 id="System-management"><a href="#System-management" class="headerlink" title="System management"></a>System management</h1><h2 id="Pruning-unused-resources"><a href="#Pruning-unused-resources" class="headerlink" title="Pruning unused resources"></a>Pruning unused resources</h2><p><strong>Listing resource consumption</strong><br>$ docker system df</p>
<h1 id="in-verbose-mode"><a href="#in-verbose-mode" class="headerlink" title="in verbose mode"></a>in verbose mode</h1><p>$ docker system df -v<br><strong>Pruning containers</strong></p>
<h1 id="regain-unused-system-resources"><a href="#regain-unused-system-resources" class="headerlink" title="regain unused system resources"></a>regain unused system resources</h1><p>$ docker container prune # remove all containers from the system that are not in running status<br>$ docker container prune -f # skip confirmation step</p>
<h1 id="remove-all-containers-from-system-even-the-running-ones"><a href="#remove-all-containers-from-system-even-the-running-ones" class="headerlink" title="remove all containers from system, even the running ones"></a>remove all containers from system, even the running ones</h1><p>$ docker container rm -f $(docker container ls -aq)<br><strong>Pruning images</strong><br>$ docker image prune</p>
<h1 id="avoid-Docker-asking-for-a-confirmation"><a href="#avoid-Docker-asking-for-a-confirmation" class="headerlink" title="avoid Docker asking for a confirmation"></a>avoid Docker asking for a confirmation</h1><p>$ docker image prune -f</p>
<h1 id="Sometimes-we-do-not-just-want-to-remove-orphaned-image-layers-but-all-images-that-are-not-currently-in-use-on-our-system-For-this-we-can-use-the-a-or-–all-flag"><a href="#Sometimes-we-do-not-just-want-to-remove-orphaned-image-layers-but-all-images-that-are-not-currently-in-use-on-our-system-For-this-we-can-use-the-a-or-–all-flag" class="headerlink" title="Sometimes we do not just want to remove orphaned image layers but all images that are not currently in use on our system. For this, we can use the -a (or –all) flag:"></a>Sometimes we do not just want to remove orphaned image layers but all images that are not currently in use on our system. For this, we can use the -a (or –all) flag:</h1><p>$ docker image prune –force –all<br><strong>Pruning volumes</strong><br>$ docker volume prune<br>A useful flag when pruning volumes is the -f or –filter flag which allows us to specify the set of volumes which we’re considering for pruning<br>$ docker volume prune –filter ‘label=demo’<br><strong>Pruning network</strong><br>will remove the networks on which currently no container or service is attached.<br>$ docker network prune<br><strong>Pruning everything</strong><br>$ docker system prune</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/docker/">docker</a><a href="/tags/containers/">containers</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/09/19/apache-cloudstack/" title="apache cloudstack" itemprop="url">apache cloudstack</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2019-09-19T12:56:11.000Z" itemprop="datePublished"> Published 2019-09-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="What-is-Apache-CloudStack"><a href="#What-is-Apache-CloudStack" class="headerlink" title="What is Apache CloudStack"></a>What is Apache CloudStack</h1><ul>
<li>Top level Apache Software Foundation project for cloud computing</li>
<li>Cloud computing framework to deploy IaaS cloud- private, public or hybrid</li>
<li>Supports all popular hypervisors for virtualization</li>
<li>Written in Java. Provides APIs and web GUI for management and administration</li>
</ul>
<h2 id="Key-features"><a href="#Key-features" class="headerlink" title="Key features"></a>Key features</h2><ul>
<li>Rich management interface</li>
<li>Powerful API</li>
<li>Dynamic workload management</li>
<li>Secure, configurable and extensible architecture<br><img src="https://i.imgur.com/J7Jm1XC.png" alt="architecuture"></li>
</ul>
<h2 id="Key-components-terminology"><a href="#Key-components-terminology" class="headerlink" title="Key components/terminology"></a>Key components/terminology</h2><ul>
<li>Region</li>
<li>Largest Organizational Unit with a CloudStack Deployment</li>
<li>Consists of one or more zones</li>
<li>Zone</li>
<li>Consists of one or more pods</li>
<li>Contains one or more primary storage servers</li>
<li>Consists of a secondary storage</li>
<li>Pod</li>
<li>Contains one or more clusters</li>
<li>Contains primary storage servers</li>
<li>Cluster</li>
<li>Consists of a group of identical hosts running a common hypervisor</li>
<li>Contins one or more primary storage servers</li>
<li>Host</li>
<li>Smallest orgnizational unit within a Cloustack deployment</li>
<li>Has hypervisor to manage the guest VMs</li>
<li>Provides the computing resources that run guest VMs.</li>
<li>Primary storage<br>iSCSI; NFS; Ceph; Gluster;  Local FileSystem</li>
<li>Secondary storage<br>Templates;  ISO images;   Disk volume; snapshots</li>
</ul>
<hr>
<p>Recap</p>
<ul>
<li>Cloud computing is more efficient than traditional IT infrastructure deployment and management</li>
<li>Cloud can be deployed in public, private and hybrid configurations</li>
<li>Cloud services can be provided as IaaS, PaaS or SaaS.</li>
<li>Apache CloudStack is an open source IaaS cloud platform</li>
<li>Apache CloudStack si very robust, extensible and open platform</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/cloudstack/">cloudstack</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand blog" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/09/12/networking/" title="networking" itemprop="url">networking</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2019-09-12T08:37:21.000Z" itemprop="datePublished"> Published 2019-09-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="IP-subnetting"><a href="#IP-subnetting" class="headerlink" title="IP subnetting"></a>IP subnetting</h1><p><strong>Subnetting part 1</strong><br>IP address</p>
<ul>
<li>Subnet address </li>
<li>1st Host address </li>
<li>Last Host address </li>
<li>Broadcast address </li>
</ul>
<p>Two methods</p>
<ul>
<li>Method 1 - Binary Method</li>
<li>Method 2 - Quick Method</li>
</ul>
<p><img src="https://i.imgur.com/GFUUIuH.png" alt="Typical example"></p>
<ul>
<li><p>What IP address would router1 be configured with if it is to use the first ip address in the same subnet as PC1?</p>
</li>
<li><p>What broadcast address is use by PC1?</p>
</li>
<li><p>What ip address would Router1 be configured with if it is to use the last IP address in the same Subnet as PC1?</p>
</li>
<li><p>What subnet is PC1 part of?</p>
</li>
</ul>
<p><strong>Binary Rules</strong></p>
<p>Network/subnet address </p>
<ul>
<li>Fill the host portion of an address with binary 0’s </li>
</ul>
<p>Broadcast address </p>
<ul>
<li>Fill the host portion of an address with binary 1’s </li>
</ul>
<p>First Host</p>
<ul>
<li>Fill the host portion of an address with binary 0’s except for the last bit which is set to binary 1</li>
</ul>
<p>Last Host</p>
<ul>
<li>Fill the host portion of an address with binary 1’s except for the last bit which is set to binary 0</li>
</ul>
<p>3rd example<br>172.16.129.1/17</p>
<p>172.16.1|000 0001.0000 0001<br>subnet = 172.16.1000 0000.0000 0000=172.16.128.0<br>Broadcast= 172.16.1111 1111.1111 1111=172.16.255.255<br>1st host=172.16.128.1<br>last host=172.16.255.254</p>
<p><strong>Shortcut table</strong><br>128|64|32|16|8|4|2|1<br>128|192|224|240|248|252|254|255</p>
<p>Tip: the first line shows the decimal values for the binary numbers of an octet<br>10000000=128   00010000=16</p>
<p>Second row, subtract the value in the frist row from 256<br>256-128=128    256-32=224   256-64=192  256-1=255</p>
<p><strong>Binary odometer:(0-255)</strong><br>10.1.1.254+1=10.1.1.255<br>10.1.1.255+1=10.1.2.0<br>10.1.2.0+1=10.1.2.1<br>or in reverse:<br>10.1.2.0-1=10.1.1.255</p>
<p>Broadcast address = Next Network -1<br>First host = subnet +1<br>last host = broadcast -1<br>What subnet is this host on?<br>What is a last host?</p>
<p><strong>Subnetting part 2</strong><br>creat multiple subnets</p>
<p>Subnet this network into at least 10 subnets<br>Subnet this network into subnets each having 10 host</p>
<h1 id="Azure-VMs-networking"><a href="#Azure-VMs-networking" class="headerlink" title="Azure VMs networking"></a>Azure VMs networking</h1><p>Priority: the lower the number, the higher the priority.</p>
<h1 id="ipcalc-in-linux"><a href="#ipcalc-in-linux" class="headerlink" title="ipcalc in linux"></a>ipcalc in linux</h1><p>ipcalc 13.75.0.0/16<br>Address:   13.75.0.0            00001101.01001011. 00000000.00000000<br>Netmask:   255.255.0.0 = 16     11111111.11111111. 00000000.00000000<br>Wildcard:  0.0.255.255          00000000.00000000. 11111111.11111111<br>=&gt;<br>Network:   13.75.0.0/16         00001101.01001011. 00000000.00000000<br>HostMin:   13.75.0.1            00001101.01001011. 00000000.00000001<br>HostMax:   13.75.255.254        00001101.01001011. 11111111.11111110<br>Broadcast: 13.75.255.255        00001101.01001011. 11111111.11111111<br>Hosts/Net: 65534                 Class A</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/networking/">networking</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/08/16/effective-devops-with-aws/" title="effective devops with aws" itemprop="url">effective devops with aws</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stan Zhou" target="_blank" itemprop="author">Stan Zhou</a>
		
  <p class="article-time">
    <time datetime="2019-08-15T14:15:29.000Z" itemprop="datePublished"> Published 2019-08-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><strong>Code</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/stanosaka/ansible">source code ansible</a><br><a target="_blank" rel="noopener" href="https://github.com/00root/helloworld">source code helloworld</a></p>
<h1 id="Continuous-Delivery"><a href="#Continuous-Delivery" class="headerlink" title="Continuous Delivery"></a>Continuous Delivery</h1><p><img src="https://i.imgur.com/QOYWSYb.png" alt="codepipline01"><br><img src="https://i.imgur.com/an0PPjD.png" alt="codepipline02"><br><img src="https://i.imgur.com/P7gdZBo.png" alt="Source"><br><img src="https://i.imgur.com/O6LNT3M.png" alt="Test"><br><img src="https://i.imgur.com/gD0EYZ7.png" alt="Deploy"><br><img src="https://i.imgur.com/uAnMDQk.png" alt="Approval"><br><img src="https://i.imgur.com/OoeILa2.png" alt="Production"><br><img src="https://i.imgur.com/Mz3RM0I.png" alt="Jenkins01"><br><img src="https://i.imgur.com/88C8zGu.png" alt="Jenkins02"><br><img src="https://i.imgur.com/7YXnt5L.png" alt="Jenkins03"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry http:&#x2F;&#x2F;registry.npmjs.org&#x2F; </span><br><span class="line">npm install</span><br><span class="line">.&#x2F;node_modules&#x2F;mocha&#x2F;bin&#x2F;mocha    </span><br></pre></td></tr></table></figure>
<p><strong>Creating the new cloudformation stack for production</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">aws cloudformation create-stack --capabilities CAPABILITY_IAM --stack-name helloworld-production --template-body file:&#x2F;&#x2F;nodeserver-cf.template --parameters ParameterKey&#x3D;KeyPair,ParameterValue&#x3D;EffectiveDevOpsAWS</span><br><span class="line">aws cloudformation wait stack-create-complete --stack-name helloworld-production</span><br><span class="line">arn&#x3D;$(aws deploy get-deployment-group --application-name helloworld --deployment-group-name staging --query &#39;deploymentGroupInfo.serviceRoleArn&#39;)</span><br><span class="line">aws deploy create-deployment-group --application-name helloworld --ec2-tag-filters Key&#x3D;aws:cloudformation:stack-name,Type&#x3D;KEY_AND_VALUE,Value&#x3D;helloworld-production --deployment-group-name production --service-role-arn $arn</span><br><span class="line">aws deploy create-deployment-group --application-name helloworld --ec2-tag-filters Key&#x3D;aws:cloudformation:stack-name,Type&#x3D;KEY_AND_VALUE,Value&#x3D;helloworld-production --deployment-group-name production --service-role-arn arn:aws:iam::012152306932:role&#x2F;CodeDeployRole</span><br><span class="line">aws deploy list-deployment-groups --application-name helloworld</span><br><span class="line">aws sns create-topic --name production-deploy-approval</span><br><span class="line">aws sns subscribe --topic-arn arn:aws:sns:ap-southeast-2:012152306932:production-deploy-approval --protocol email --notification-endpoint foobar@gmail.com</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/devops/">devops</a><a href="/tags/CICD/">CICD</a><a href="/tags/aws/">aws</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/">&lt;span&gt;&lt;&#x2F;span&gt;Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/">Next&lt;span&gt;&lt;&#x2F;span&gt;</a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github Card</p>
<div class="github-card" data-github="stanosaka" data-theme="medium"></div>
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>



  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/devops/" title="devops">devops<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/aws/" title="aws">aws<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/CICD/" title="CICD">CICD<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/centos/" title="centos">centos<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Jenkins/" title="Jenkins">Jenkins<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/mysql/" title="mysql">mysql<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/K8s/" title="K8s">K8s<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/SRE/" title="SRE">SRE<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/azure/" title="azure">azure<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/git/" title="git">git<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/tomcat/" title="tomcat">tomcat<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/kubernetes/" title="kubernetes">kubernetes<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/saltstack/" title="saltstack">saltstack<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/zabbix/" title="zabbix">zabbix<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/IaC/" title="IaC">IaC<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ec2/" title="ec2">ec2<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/backup/" title="backup">backup<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/github/" title="github">github<sup>2</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://github.com/kahun/awesome-sysadmin" target="_blank" title="Awesome-sysadmin">Awesome-sysadmin</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/crazy-canux/awesome-monitoring" target="_blank" title="Awesome-monitoring">Awesome-monitoring</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.opsschool.org/index.html" target="_blank" title="Ops School Curriculum">Ops School Curriculum</a>
            
          </li>
        
          <li>
            
            	<a href="https://kupczynski.info/2018/04/18/spacemacs.html" target="_blank" title="Learning Spacemacs">Learning Spacemacs</a>
            
          </li>
        
          <li>
            
            	<a href="https://landing.google.com/sre/books/" target="_blank" title="SRE Books">SRE Books</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/aws-samples" target="_blank" title="AWS Samples">AWS Samples</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/bikrambora/devlab-launchpad" target="_blank" title="Welcome to Dev Labs">Dev Labs</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/ansible/ansible-examples" target="_blank" title="Ansible GitHub repo">Ansible GitHub repo</a>
            
          </li>
        
          <li>
            
            	<a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html" target="_blank" title="Ansible Best Practices">Ansible Best Practices</a>
            
          </li>
        
          <li>
            
            	<a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/" target="_blank" title="kubectl cheat sheet">kubectl cheat sheet</a>
            
          </li>
        
          <li>
            
            	<a href="http://rogerdudler.github.io/git-guide" target="_blank" title="Git commands">Git commands</a>
            
          </li>
        
          <li>
            
            	<a href="https://docs.docker.com/engine/reference/builder/" target="_blank" title="Dockerfile reference">Dockerfile reference</a>
            
          </li>
        
          <li>
            
            	<a href="http://bit.ly/2mTQr8l" target="_blank" title="Linux Command line cheat sheet">Linux Command line cheat sheet</a>
            
          </li>
        
          <li>
            
            	<a href="http://bit.ly/2EPHxze" target="_blank" title="PowerShell Basic Cheat Sheet">PowerShell Basic Cheat Sheet</a>
            
          </li>
        
          <li>
            
            	<a href="http://sed.sourceforge.net/sed1line_zh-CN.html" target="_blank" title="sed cheatsheet">sed cheatsheet</a>
            
          </li>
        
          <li>
            
            	<a href="http://obsavus1p.bkt.clouddn.com/vim_cheat_sheet_for_programmers_print.png" target="_blank" title="vim cheatsheet">vim cheatsheet</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.gitbook.com/book/yeasy/docker_practice/details" target="_blank" title="Learn Docker">Learn Docker</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.unixhot.com/page/ops" target="_blank" title="运维知识体系">运维知识体系</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.tecmint.com/" target="_blank" title="tecmint">tecmint</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.lib.uts.edu.au" target="_blank" title="shoujin.wang@student.uts.edu.au">UTS Library</a>
            
          </li>
        
          <li>
            
            	<a href="https://7esl.com" target="_blank" title="ESL">ESL</a>
            
          </li>
        
          <li>
            
            	<a href="https://stanchou.wordpress.com" target="_blank" title="Stan&#39;s wordpress">Stan&#39;s wordpress</a>
            
          </li>
        
          <li>
            
            	<a href="https://docs.00root.com" target="_blank" title="Stan&#39;s gitbook">Stan&#39;s gitbook</a>
            
          </li>
        
          <li>
            
            	<a href="https://api.ipify.org" target="_blank" title="Your IP address">Your IP address</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/stanosaka/oreilly_sql_fundamentals_for_data/blob/master/notes_and_slides/sql_fundamentals_notes.md" target="_blank" title="sql fundamentials">sql fundamentials</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.nerdfonts.com" target="_blank" title="Nred Fonts">Nred Fonts</a>
            
          </li>
        
          <li>
            
            	<a href="http://cb.vu/unixtoolbox.xhtml" target="_blank" title="UNIX TOOLBOX">UNIX TOOLBOX</a>
            
          </li>
        
          <li>
            
            	<a href="https://github.com/Ben-PH/spacemacs-cheatsheet" target="_blank" title="spacemacs-cheatsheet">spacemacs-cheatsheet</a>
            
          </li>
        
          <li>
            
            	<a href="https://rubular.com/" target="_blank" title="Regular expression editor 1">Regular expression editor 1</a>
            
          </li>
        
          <li>
            
            	<a href="https://pythex.org/" target="_blank" title="Regular expression editor 2">Regular expression editor 2</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Stan. <br/>
			I am a Site Reliability Engineer working and living in Sydney.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/stanosaka" target="_blank" class="icon-github" title="github"></a>
		
		
		<a href="http://stackoverflow.com/users/6724938" target="_blank" class="icon-stack-overflow" title="stackoverflow"></a>
		
		
		<a href="https://twitter.com/stanosaka" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/stan.osaka" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		<a href="https://www.linkedin.com/in/00root" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		<a href="https://www.douban.com/people/btw01v" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="http://www.zhihu.com/people/stan-22-82" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:devops@cwzhou.win" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2021 
		
		<a href="/about" target="_blank" title="Stan Zhou">Stan Zhou</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
